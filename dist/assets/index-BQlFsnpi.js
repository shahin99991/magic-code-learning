import{j as jsxRuntimeExports,c as createTheme,C as Container,B as Box,P as Paper,T as Typography,A as Alert,a as TextField,b as Button,L as Link,d as LinearProgress,e as Tabs,f as Tab,F as FormControl,I as InputLabel,S as Select,M as MenuItem,D as Dialog,g as DialogTitle,h as DialogContent,i as DialogActions,k as ThemeProvider}from"./ui-Bzc6d1Gg.js";import{c as reactDomExports,r as reactExports,u as useNavigate,a as React,N as Navigate,B as BrowserRouter,d as Routes,e as Route}from"./vendor-BYmc5_ep.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&s(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();var client={},m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;const loadUsersFromStorage=()=>{const e=localStorage.getItem("users");return e?new Map(JSON.parse(e)):new Map},saveUsersToStorage=e=>{localStorage.setItem("users",JSON.stringify(Array.from(e.entries())))},mockUserStorage=loadUsersFromStorage();mockUserStorage.has("test@example.com")||(mockUserStorage.set("test@example.com",{password:"password123",user:{id:"1",email:"test@example.com",name:"Test User"}}),saveUsersToStorage(mockUserStorage));const authApi={login:async e=>{const n=loadUsersFromStorage().get(e.email);if(n&&n.password===e.password)return{token:"mock-jwt-token",user:n.user};const s=new Error("ログインに失敗しました。メールアドレスとパスワードを確認してください。");throw s.name="AuthError",s},register:async e=>{const t=loadUsersFromStorage();if(e.email&&e.password.length>=8){if(t.has(e.email)){const r=new Error("このメールアドレスは既に登録されています。");throw r.name="RegisterError",r}const s={id:Date.now().toString(),email:e.email,name:"見習い魔法使い"};return t.set(e.email,{password:e.password,user:s}),saveUsersToStorage(t),{token:"mock-jwt-token",user:s}}const n=new Error("登録に失敗しました。入力内容を確認してください。");throw n.name="RegisterError",n},logout:async()=>Promise.resolve()},AuthContext=reactExports.createContext({user:null,error:null,login:async()=>{},register:async()=>{},logout:async()=>{},clearError:()=>{}}),useAuth=()=>{const e=reactExports.useContext(AuthContext);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},AuthProvider=({children:e})=>{const[t,n]=reactExports.useState(null),[s,r]=reactExports.useState(null),u={user:t,error:s,login:async d=>{try{const f=await authApi.login(d);localStorage.setItem("token",f.token),n(f.user),r(null)}catch(f){throw r("ログインに失敗しました。メールアドレスとパスワードを確認してください。"),f}},register:async(d,f)=>{try{const p=await authApi.register({email:d,password:f});localStorage.setItem("token",p.token),n(p.user),r(null)}catch(p){throw r("登録に失敗しました。入力内容を確認してください。"),p}},logout:async()=>{try{await authApi.logout(),localStorage.removeItem("token"),localStorage.removeItem("gameProgress"),localStorage.removeItem("magicCodeLearning_levelData"),n(null),r(null)}catch(d){throw r("ログアウトに失敗しました。"),d}},clearError:()=>{r(null)}};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:u,children:e})},LevelContext=reactExports.createContext(null),useLevel=()=>{const e=reactExports.useContext(LevelContext);if(!e)throw new Error("useLevel must be used within a LevelProvider");return e},LevelProvider=({children:e})=>{const[t,n]=reactExports.useState(1),[s,r]=reactExports.useState(0),o=t*1e3,i=s,c=t,a=getTitleForLevel(t),u=d=>{r(f=>{const p=f+d,g=t*1e3;return p>=g?(n(x=>x+1),p-g):p})};return jsxRuntimeExports.jsx(LevelContext.Provider,{value:{level:t,experience:s,currentExp:i,currentLevel:c,expToNextLevel:o,currentTitle:a,addExperience:u},children:e})};function getTitleForLevel(e){return e<5?"見習い魔法使い":e<10?"初級魔法使い":e<15?"中級魔法使い":e<20?"上級魔法使い":"大魔法使い"}const ProgressContext=reactExports.createContext(null),useProgress=()=>{const e=reactExports.useContext(ProgressContext);if(!e)throw new Error("useProgress must be used within a ProgressProvider");return e},ProgressProvider=({children:e})=>{const[t,n]=reactExports.useState(null),s=r=>{n(o=>o?{...o,totalPoints:o.totalPoints+r}:null)};return jsxRuntimeExports.jsx(ProgressContext.Provider,{value:{progress:t,updateProgress:s},children:e})},LearningContext=reactExports.createContext(null),LearningProvider=({children:e})=>{const[t,n]=reactExports.useState(null),[s,r]=reactExports.useState(null),[o,i]=reactExports.useState(null),c=a=>{o&&i(u=>u?u.map(d=>d.level.toString()===a?{...d,unlocked:!0}:d):null)};return jsxRuntimeExports.jsx(LearningContext.Provider,{value:{explanation:t,setExplanation:n,solution:s,setSolution:r,hintSystem:o,setHintSystem:i,unlockHint:c},children:e})},theme=createTheme({palette:{primary:{main:"#6200EA",light:"#B388FF",dark:"#3700B3"},secondary:{main:"#E8E3F4",light:"#FFFFFF",dark:"#B1AAC4"}},typography:{fontFamily:"Rajdhani, Arial, sans-serif",h1:{background:"linear-gradient(45deg, #B388FF 30%, #6200EA 90%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"}},components:{MuiButton:{styleOverrides:{root:{background:"linear-gradient(45deg, #6200EA 30%, #B388FF 90%)",border:0,borderRadius:3,boxShadow:"0 3px 5px 2px rgba(98, 0, 234, .3)",color:"white",padding:"0 30px","&:hover":{background:"linear-gradient(45deg, #B388FF 30%, #6200EA 90%)",boxShadow:"0 3px 5px 2px rgba(179, 136, 255, .3)"}}}}}}),LoginForm=()=>{const e=useNavigate(),{login:t,error:n,clearError:s}=useAuth(),[r,o]=reactExports.useState(""),[i,c]=reactExports.useState(""),[a,u]=reactExports.useState(!1),[d,f]=reactExports.useState({email:"",password:""}),p=()=>{const x={email:"",password:""};let y=!0;return r?/\S+@\S+\.\S+/.test(r)||(x.email="有効なメールアドレスを入力してください",y=!1):(x.email="メールアドレスを入力してください",y=!1),i?i.length<8&&(x.password="パスワードは8文字以上である必要があります",y=!1):(x.password="パスワードを入力してください",y=!1),f(x),y},g=async x=>{if(x.preventDefault(),!a&&p())try{u(!0),s(),await t({email:r,password:i}),e("/game")}catch(y){console.error("Login error:",y)}finally{u(!1)}};return jsxRuntimeExports.jsx(Container,{maxWidth:"sm",children:jsxRuntimeExports.jsx(Box,{sx:{mt:8,mb:4},children:jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:4},children:[jsxRuntimeExports.jsx(Typography,{component:"h1",variant:"h5",align:"center",gutterBottom:!0,children:"ログイン"}),n&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},children:n}),jsxRuntimeExports.jsxs(Box,{component:"form",onSubmit:g,noValidate:!0,children:[jsxRuntimeExports.jsx(TextField,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:"メールアドレス",name:"email",autoComplete:"email",autoFocus:!0,value:r,onChange:x=>o(x.target.value),error:!!d.email,helperText:d.email,disabled:a}),jsxRuntimeExports.jsx(TextField,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"パスワード",type:"password",id:"password",autoComplete:"current-password",value:i,onChange:x=>c(x.target.value),error:!!d.password,helperText:d.password,disabled:a}),jsxRuntimeExports.jsx(Button,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:a,children:a?"ログイン中...":"ログイン"}),jsxRuntimeExports.jsx(Box,{sx:{textAlign:"center"},children:jsxRuntimeExports.jsx(Link,{component:"button",variant:"body2",onClick:()=>e("/register"),disabled:a,children:"新規登録はこちら"})})]})]})})})},MagicBackground=()=>jsxRuntimeExports.jsx(Box,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"linear-gradient(45deg, #2196F3 30%, #21CBF3 90%)",zIndex:-1}}),MagicParticles=()=>jsxRuntimeExports.jsx(Box,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none",zIndex:0,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",width:"200vw",height:"200vh",transform:"translate(-50%, -50%)",background:"radial-gradient(circle, rgba(255,255,255,0.1) 0%, rgba(255,255,255,0) 70%)",animation:"sparkle 4s ease-in-out infinite"},"@keyframes sparkle":{"0%":{opacity:.3},"50%":{opacity:.7},"100%":{opacity:.3}}}}),LoginPage=()=>jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",minHeight:"100vh"},children:[jsxRuntimeExports.jsx(MagicBackground,{}),jsxRuntimeExports.jsx(MagicParticles,{}),jsxRuntimeExports.jsx(Container,{maxWidth:"sm",sx:{pt:8},children:jsxRuntimeExports.jsx(LoginForm,{})})]}),RegisterForm=()=>{const e=useNavigate(),{register:t}=useAuth(),[n,s]=reactExports.useState(""),[r,o]=reactExports.useState(""),[i,c]=reactExports.useState(""),[a,u]=reactExports.useState(""),d=async f=>{if(f.preventDefault(),u(""),r!==i){u("パスワードが一致しません");return}try{await t(n,r),e("/game")}catch{u("登録に失敗しました")}};return jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:4,backgroundColor:"rgba(255, 255, 255, 0.9)"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",gutterBottom:!0,align:"center",children:"新規登録"}),a&&jsxRuntimeExports.jsx(Alert,{severity:"error",sx:{mb:2},children:a}),jsxRuntimeExports.jsxs(Box,{component:"form",onSubmit:d,children:[jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"メールアドレス",type:"email",value:n,onChange:f=>s(f.target.value),margin:"normal",required:!0}),jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"パスワード",type:"password",value:r,onChange:f=>o(f.target.value),margin:"normal",required:!0}),jsxRuntimeExports.jsx(TextField,{fullWidth:!0,label:"パスワード（確認）",type:"password",value:i,onChange:f=>c(f.target.value),margin:"normal",required:!0}),jsxRuntimeExports.jsx(Button,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",sx:{mt:3,mb:2},children:"登録"}),jsxRuntimeExports.jsx(Button,{fullWidth:!0,variant:"text",onClick:()=>e("/login"),children:"ログインページへ"})]})]})},RegisterPage=()=>jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",minHeight:"100vh"},children:[jsxRuntimeExports.jsx(MagicBackground,{}),jsxRuntimeExports.jsx(MagicParticles,{}),jsxRuntimeExports.jsx(Container,{maxWidth:"sm",sx:{pt:8},children:jsxRuntimeExports.jsx(RegisterForm,{})})]}),LevelDisplay=()=>{const{currentExp:e,currentLevel:t,expToNextLevel:n,currentTitle:s}=useLevel(),r=e/n*100;return jsxRuntimeExports.jsxs(Box,{sx:{position:"absolute",top:20,right:20,backgroundColor:"rgba(255, 255, 255, 0.9)",padding:2,borderRadius:2,boxShadow:3,minWidth:200},children:[jsxRuntimeExports.jsxs(Typography,{variant:"h6",gutterBottom:!0,children:["Lv. ",t," - ",s]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",mb:1},children:[jsxRuntimeExports.jsx(Typography,{variant:"body2",sx:{mr:1},children:"EXP:"}),jsxRuntimeExports.jsx(Box,{sx:{width:"100%",mr:1},children:jsxRuntimeExports.jsx(LinearProgress,{variant:"determinate",value:r,sx:{height:10,borderRadius:5,backgroundColor:"rgba(0, 0, 0, 0.1)","& .MuiLinearProgress-bar":{backgroundColor:"#4caf50"}}})}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",sx:{minWidth:60},children:[e,"/",n]})]})]})},executeCode=async(code,input=[],expected,timeoutMs=3e3)=>new Promise(resolve=>{const timeoutId=setTimeout(()=>{resolve({success:!1,message:"❌ 実行時間が長すぎます（制限時間: 3秒）"})},timeoutMs);try{const context={},wrappedCode=`
        ${code}
        context.fn = ${code.trim()};
      `;if(eval(wrappedCode),typeof context.fn=="function"){const e=context.fn(...input);let t=!1;Array.isArray(expected)?t=Array.isArray(e)&&e.length===expected.length&&e.every((n,s)=>n===expected[s]):t=e===expected,resolve({success:t,message:t?"✨ テストに成功しました！":`❌ 期待値: ${JSON.stringify(expected)}, 実際の値: ${JSON.stringify(e)}`,actual:e})}else throw new Error("Function is not properly defined")}catch(e){if(clearTimeout(timeoutId),e instanceof Error)throw console.error("Code execution error:",e.message),e;{const t=String(e);throw console.error("Code execution error:",t),new Error(t)}}}),LayoutGroupContext=reactExports.createContext({});function useConstant(e){const t=reactExports.useRef(null);return t.current===null&&(t.current=e()),t.current}const PresenceContext=reactExports.createContext(null),MotionConfigContext=reactExports.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:e,isPresent:t}){const n=reactExports.useId(),s=reactExports.useRef(null),r=reactExports.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:i,height:c,top:a,left:u}=r.current;if(t||!s.current||!i||!c)return;s.current.dataset.motionPopId=n;const d=document.createElement("style");return o&&(d.nonce=o),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${c}px !important;
            top: ${a}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[t]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:t,childRef:s,sizeRef:r,children:reactExports.cloneElement(e,{ref:s})})}const PresenceChild=({children:e,initial:t,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:o,mode:i})=>{const c=useConstant(newChildrenMap),a=reactExports.useId(),u=reactExports.useCallback(f=>{c.set(f,!0);for(const p of c.values())if(!p)return;s&&s()},[c,s]),d=reactExports.useMemo(()=>({id:a,initial:t,isPresent:n,custom:r,onExitComplete:u,register:f=>(c.set(f,!1),()=>c.delete(f))}),o?[Math.random(),u]:[n,u]);return reactExports.useMemo(()=>{c.forEach((f,p)=>c.set(p,!1))},[n]),reactExports.useEffect(()=>{!n&&!c.size&&s&&s()},[n]),i==="popLayout"&&(e=jsxRuntimeExports.jsx(PopChild,{isPresent:n,children:e})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:d,children:e})};function newChildrenMap(){return new Map}function usePresence(e=!0){const t=reactExports.useContext(PresenceContext);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:s,register:r}=t,o=reactExports.useId();reactExports.useEffect(()=>{e&&r(o)},[e]);const i=reactExports.useCallback(()=>e&&s&&s(o),[o,s,e]);return!n&&s?[!1,i]:[!0]}const getChildKey=e=>e.key||"";function onlyElements(e){const t=[];return reactExports.Children.forEach(e,n=>{reactExports.isValidElement(n)&&t.push(n)}),t}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,AnimatePresence=({children:e,custom:t,initial:n=!0,onExitComplete:s,presenceAffectsLayout:r=!0,mode:o="sync",propagate:i=!1})=>{const[c,a]=usePresence(i),u=reactExports.useMemo(()=>onlyElements(e),[e]),d=i&&!c?[]:u.map(getChildKey),f=reactExports.useRef(!0),p=reactExports.useRef(u),g=useConstant(()=>new Map),[x,y]=reactExports.useState(u),[P,b]=reactExports.useState(u);useIsomorphicLayoutEffect(()=>{f.current=!1,p.current=u;for(let R=0;R<P.length;R++){const E=getChildKey(P[R]);d.includes(E)?g.delete(E):g.get(E)!==!0&&g.set(E,!1)}},[P,d.length,d.join("-")]);const T=[];if(u!==x){let R=[...u];for(let E=0;E<P.length;E++){const C=P[E],w=getChildKey(C);d.includes(w)||(R.splice(E,0,C),T.push(C))}o==="wait"&&T.length&&(R=T),b(onlyElements(R)),y(u);return}const{forceRender:S}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:P.map(R=>{const E=getChildKey(R),C=i&&!c?!1:u===P||d.includes(E),w=()=>{if(g.has(E))g.set(E,!0);else return;let A=!0;g.forEach(M=>{M||(A=!1)}),A&&(S==null||S(),b(p.current),i&&(a==null||a()),s&&s())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:C,initial:!f.current||n?void 0:!1,custom:C?void 0:t,presenceAffectsLayout:r,mode:o,onExitComplete:C?void 0:w,children:R},E)})})},noop=e=>e;let invariant=noop;function memo(e){let t;return()=>(t===void 0&&(t=e()),t)}const progress=(e,t,n)=>{const s=t-e;return s===0?1:(n-e)/s},secondsToMilliseconds=e=>e*1e3,millisecondsToSeconds=e=>e/1e3,MotionGlobalConfig={skipAnimations:!1,useManualTiming:!1};function createRenderStep(e){let t=new Set,n=new Set,s=!1,r=!1;const o=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(a.schedule(u),e()),u(i)}const a={schedule:(u,d=!1,f=!1)=>{const g=f&&s?t:n;return d&&o.add(u),g.has(u)||g.add(u),u},cancel:u=>{n.delete(u),o.delete(u)},process:u=>{if(i=u,s){r=!0;return}s=!0,[t,n]=[n,t],t.forEach(c),t.clear(),s=!1,r&&(r=!1,a.process(u))}};return a}const stepsOrder=["read","resolveKeyframes","update","preRender","render","postRender"],maxElapsed=40;function createRenderBatcher(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,i=stepsOrder.reduce((b,T)=>(b[T]=createRenderStep(o),b),{}),{read:c,resolveKeyframes:a,update:u,preRender:d,render:f,postRender:p}=i,g=()=>{const b=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(b-r.timestamp,maxElapsed),1),r.timestamp=b,r.isProcessing=!0,c.process(r),a.process(r),u.process(r),d.process(r),f.process(r),p.process(r),r.isProcessing=!1,n&&t&&(s=!1,e(g))},x=()=>{n=!0,s=!0,r.isProcessing||e(g)};return{schedule:stepsOrder.reduce((b,T)=>{const S=i[T];return b[T]=(R,E=!1,C=!1)=>(n||x(),S.schedule(R,E,C)),b},{}),cancel:b=>{for(let T=0;T<stepsOrder.length;T++)i[stepsOrder[T]].cancel(b)},state:r,steps:i}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0),LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const e in featureProps)featureDefinitions[e]={isEnabled:t=>featureProps[e].some(n=>!!t[n])};function loadFeatures(e){for(const t in e)featureDefinitions[t]={...featureDefinitions[t],...e[t]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||validMotionProps.has(e)}let shouldForward=e=>!isValidMotionProp(e);function loadExternalIsValidProp(e){e&&(shouldForward=t=>t.startsWith("on")?!isValidMotionProp(t):e(t))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch(e){}function filterProps(e,t,n){const s={};for(const r in e)r==="values"&&typeof e.values=="object"||(shouldForward(r)||n===!0&&isValidMotionProp(r)||!t&&!isValidMotionProp(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}function createDOMMotionComponentProxy(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...s)=>e(...s);return new Proxy(n,{get:(s,r)=>r==="create"?e:(t.has(r)||t.set(r,e(r)),t.get(r))})}const MotionContext=reactExports.createContext({});function isVariantLabel(e){return typeof e=="string"||Array.isArray(e)}function isAnimationControls(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(e){return isAnimationControls(e.animate)||variantProps.some(t=>isVariantLabel(e[t]))}function isVariantNode(e){return!!(isControllingVariants(e)||e.variants)}function getCurrentTreeVariants(e,t){if(isControllingVariants(e)){const{initial:n,animate:s}=e;return{initial:n===!1||isVariantLabel(n)?n:void 0,animate:isVariantLabel(s)?s:void 0}}return e.inherit!==!1?t:{}}function useCreateMotionContext(e){const{initial:t,animate:n}=getCurrentTreeVariants(e,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:t,animate:n}),[variantLabelsAsDependency(t),variantLabelsAsDependency(n)])}function variantLabelsAsDependency(e){return Array.isArray(e)?e.join(" "):e}const motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function useMotionRef(e,t,n){return reactExports.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),n&&(typeof n=="function"?n(s):isRefObject(n)&&(n.current=s))},[t])}const camelToDash=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),{schedule:microtask,cancel:cancelMicrotask}=createRenderBatcher(queueMicrotask,!1),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(e,t,n,s,r){var o,i;const{visualElement:c}=reactExports.useContext(MotionContext),a=reactExports.useContext(LazyContext),u=reactExports.useContext(PresenceContext),d=reactExports.useContext(MotionConfigContext).reducedMotion,f=reactExports.useRef(null);s=s||a.renderer,!f.current&&s&&(f.current=s(e,{visualState:t,parent:c,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const p=f.current,g=reactExports.useContext(SwitchLayoutGroupContext);p&&!p.projection&&r&&(p.type==="html"||p.type==="svg")&&createProjectionNode$1(f.current,n,r,g);const x=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{p&&x.current&&p.update(n,u)});const y=n[optimizedAppearDataAttribute],P=reactExports.useRef(!!y&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,y))&&((i=window.MotionHasOptimisedAnimation)===null||i===void 0?void 0:i.call(window,y)));return useIsomorphicLayoutEffect(()=>{p&&(x.current=!0,window.MotionIsMounted=!0,p.updateFeatures(),microtask.render(p.render),P.current&&p.animationState&&p.animationState.animateChanges())}),reactExports.useEffect(()=>{p&&(!P.current&&p.animationState&&p.animationState.animateChanges(),P.current&&(queueMicrotask(()=>{var b;(b=window.MotionHandoffMarkAsComplete)===null||b===void 0||b.call(window,y)}),P.current=!1))}),p}function createProjectionNode$1(e,t,n,s){const{layoutId:r,layout:o,drag:i,dragConstraints:c,layoutScroll:a,layoutRoot:u}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:getClosestProjectingNode(e.parent)),e.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!i||c&&isRefObject(c),visualElement:e,animationType:typeof o=="string"?o:"both",initialPromotionConfig:s,layoutScroll:a,layoutRoot:u})}function getClosestProjectingNode(e){if(e)return e.options.allowProjection!==!1?e.projection:getClosestProjectingNode(e.parent)}function createRendererMotionComponent({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:s,Component:r}){var o,i;e&&loadFeatures(e);function c(u,d){let f;const p={...reactExports.useContext(MotionConfigContext),...u,layoutId:useLayoutId(u)},{isStatic:g}=p,x=useCreateMotionContext(u),y=s(u,g);if(!g&&isBrowser){useStrictMode();const P=getProjectionFunctionality(p);f=P.MeasureLayout,x.visualElement=useVisualElement(r,y,p,t,P.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:x,children:[f&&x.visualElement?jsxRuntimeExports.jsx(f,{visualElement:x.visualElement,...p}):null,n(r,u,useMotionRef(y,x.visualElement,d),y,g,x.visualElement)]})}c.displayName=`motion.${typeof r=="string"?r:`create(${(i=(o=r.displayName)!==null&&o!==void 0?o:r.name)!==null&&i!==void 0?i:""})`}`;const a=reactExports.forwardRef(c);return a[motionComponentSymbol]=r,a}function useLayoutId({layoutId:e}){const t=reactExports.useContext(LayoutGroupContext).id;return t&&e!==void 0?t+"-"+e:e}function useStrictMode(e,t){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(e){const{drag:t,layout:n}=featureDefinitions;if(!t&&!n)return{};const s={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(e){return typeof e!="string"||e.includes("-")?!1:!!(lowercaseSVGElements.indexOf(e)>-1||/[A-Z]/u.test(e))}function getValueState(e){const t=[{},{}];return e==null||e.values.forEach((n,s)=>{t[0][s]=n.get(),t[1][s]=n.getVelocity()}),t}function resolveVariantFromProps(e,t,n,s){if(typeof t=="function"){const[r,o]=getValueState(s);t=t(n!==void 0?n:e.custom,r,o)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[r,o]=getValueState(s);t=t(n!==void 0?n:e.custom,r,o)}return t}const isKeyframesTarget=e=>Array.isArray(e),isCustomValue=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),resolveFinalValueInKeyframes=e=>isKeyframesTarget(e)?e[e.length-1]||0:e,isMotionValue=e=>!!(e&&e.getVelocity);function resolveMotionValue(e){const t=isMotionValue(e)?e.get():e;return isCustomValue(t)?t.toValue():t}function makeState({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},s,r,o){const i={latestValues:makeLatestValues(s,r,o,e),renderState:t()};return n&&(i.onMount=c=>n({props:s,current:c,...i}),i.onUpdate=c=>n(c)),i}const makeUseVisualState=e=>(t,n)=>{const s=reactExports.useContext(MotionContext),r=reactExports.useContext(PresenceContext),o=()=>makeState(e,t,s,r);return n?o():useConstant(o)};function makeLatestValues(e,t,n,s){const r={},o=s(e,{});for(const p in o)r[p]=resolveMotionValue(o[p]);let{initial:i,animate:c}=e;const a=isControllingVariants(e),u=isVariantNode(e);t&&u&&!a&&e.inherit!==!1&&(i===void 0&&(i=t.initial),c===void 0&&(c=t.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const f=d?c:i;if(f&&typeof f!="boolean"&&!isAnimationControls(f)){const p=Array.isArray(f)?f:[f];for(let g=0;g<p.length;g++){const x=resolveVariantFromProps(e,p[g]);if(x){const{transitionEnd:y,transition:P,...b}=x;for(const T in b){let S=b[T];if(Array.isArray(S)){const R=d?S.length-1:0;S=S[R]}S!==null&&(r[T]=S)}for(const T in y)r[T]=y[T]}}}return r}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),checkStringStartsWith=e=>t=>typeof t=="string"&&t.startsWith(e),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=e=>startsAsVariableToken(e)?singleCssVariableRegex.test(e.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,getValueAsType=(e,t)=>t&&typeof e=="number"?t.transform(e):e,clamp=(e,t,n)=>n>t?t:n<e?e:n,number={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},alpha={...number,transform:e=>clamp(0,1,e)},scale={...number,default:1},createUnitType=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:e=>percent.parse(e)/100,transform:e=>percent.transform(e*100)},browserNumberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},int={...number,transform:Math.round},numberValueTypes={...browserNumberValueTypes,...transformValueTypes,zIndex:int,size:px,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(e,t,n){let s="",r=!0;for(let o=0;o<numTransforms;o++){const i=transformPropOrder[o],c=e[i];if(c===void 0)continue;let a=!0;if(typeof c=="number"?a=c===(i.startsWith("scale")?1:0):a=parseFloat(c)===0,!a||n){const u=getValueAsType(c,numberValueTypes[i]);if(!a){r=!1;const d=translateAlias[i]||i;s+=`${d}(${u}) `}n&&(t[i]=u)}}return s=s.trim(),n?s=n(t,r?"":s):r&&(s="none"),s}function buildHTMLStyles(e,t,n){const{style:s,vars:r,transformOrigin:o}=e;let i=!1,c=!1;for(const a in t){const u=t[a];if(transformProps.has(a)){i=!0;continue}else if(isCSSVariableName(a)){r[a]=u;continue}else{const d=getValueAsType(u,numberValueTypes[a]);a.startsWith("origin")?(c=!0,o[a]=d):s[a]=d}}if(t.transform||(i||n?s.transform=buildTransform(t,e.transform,n):s.transform&&(s.transform="none")),c){const{originX:a="50%",originY:u="50%",originZ:d=0}=o;s.transformOrigin=`${a} ${u} ${d}`}}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(e,t,n=1,s=0,r=!0){e.pathLength=1;const o=r?dashKeys:camelKeys;e[o.offset]=px.transform(-s);const i=px.transform(t),c=px.transform(n);e[o.array]=`${i} ${c}`}function calcOrigin$1(e,t,n){return typeof e=="string"?e:px.transform(t+n*e)}function calcSVGTransformOrigin(e,t,n){const s=calcOrigin$1(t,e.x,e.width),r=calcOrigin$1(n,e.y,e.height);return`${s} ${r}`}function buildSVGAttrs(e,{attrX:t,attrY:n,attrScale:s,originX:r,originY:o,pathLength:i,pathSpacing:c=1,pathOffset:a=0,...u},d,f){if(buildHTMLStyles(e,u,f),d){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g,dimensions:x}=e;p.transform&&(x&&(g.transform=p.transform),delete p.transform),x&&(r!==void 0||o!==void 0||g.transform)&&(g.transformOrigin=calcSVGTransformOrigin(x,r!==void 0?r:.5,o!==void 0?o:.5)),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),s!==void 0&&(p.scale=s),i!==void 0&&buildSVGPath(p,i,c,a,!1)}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=e=>typeof e=="string"&&e.toLowerCase()==="svg";function renderHTML(e,{style:t,vars:n},s,r){Object.assign(e.style,t,r&&r.getProjectionStyles(s));for(const o in n)e.style.setProperty(o,n[o])}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(e,t,n,s){renderHTML(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(camelCaseAttributes.has(r)?r:camelToDash(r),t.attrs[r])}const scaleCorrectors={};function addScaleCorrector(e){Object.assign(scaleCorrectors,e)}function isForcedMotionValue(e,{layout:t,layoutId:n}){return transformProps.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!scaleCorrectors[e]||e==="opacity")}function scrapeMotionValuesFromProps$1(e,t,n){var s;const{style:r}=e,o={};for(const i in r)(isMotionValue(r[i])||t.style&&isMotionValue(t.style[i])||isForcedMotionValue(i,e)||((s=n==null?void 0:n.getValue(i))===null||s===void 0?void 0:s.liveStyle)!==void 0)&&(o[i]=r[i]);return o}function scrapeMotionValuesFromProps(e,t,n){const s=scrapeMotionValuesFromProps$1(e,t,n);for(const r in e)if(isMotionValue(e[r])||isMotionValue(t[r])){const o=transformPropOrder.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;s[o]=e[r]}return s}function updateSVGDimensions(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}const layoutProps=["x","y","width","height","cx","cy","r"],svgMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState,onUpdate:({props:e,prevProps:t,current:n,renderState:s,latestValues:r})=>{if(!n)return;let o=!!e.drag;if(!o){for(const c in r)if(transformProps.has(c)){o=!0;break}}if(!o)return;let i=!t;if(t)for(let c=0;c<layoutProps.length;c++){const a=layoutProps[c];e[a]!==t[a]&&(i=!0)}i&&frame.read(()=>{updateSVGDimensions(n,s),frame.render(()=>{buildSVGAttrs(s,r,isSVGTag(n.tagName),e.transformTemplate),renderSVG(n,s)})})}})},htmlMotionConfig={useVisualState:makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState})};function copyRawValuesOnly(e,t,n){for(const s in t)!isMotionValue(t[s])&&!isForcedMotionValue(s,n)&&(e[s]=t[s])}function useInitialMotionValues({transformTemplate:e},t){return reactExports.useMemo(()=>{const n=createHtmlRenderState();return buildHTMLStyles(n,t,e),Object.assign({},n.vars,n.style)},[t])}function useStyle(e,t){const n=e.style||{},s={};return copyRawValuesOnly(s,n,e),Object.assign(s,useInitialMotionValues(e,t)),s}function useHTMLProps(e,t){const n={},s=useStyle(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=s,n}function useSVGProps(e,t,n,s){const r=reactExports.useMemo(()=>{const o=createSvgRenderState();return buildSVGAttrs(o,t,isSVGTag(s),e.transformTemplate),{...o.attrs,style:{...o.style}}},[t]);if(e.style){const o={};copyRawValuesOnly(o,e.style,e),r.style={...o,...r.style}}return r}function createUseRender(e=!1){return(n,s,r,{latestValues:o},i)=>{const a=(isSVGComponent(n)?useSVGProps:useHTMLProps)(s,o,i,n),u=filterProps(s,typeof n=="string",e),d=n!==reactExports.Fragment?{...u,...a,ref:r}:{},{children:f}=s,p=reactExports.useMemo(()=>isMotionValue(f)?f.get():f,[f]);return reactExports.createElement(n,{...d,children:p})}}function createMotionComponentFactory(e,t){return function(s,{forwardMotionProps:r}={forwardMotionProps:!1}){const i={...isSVGComponent(s)?svgMotionConfig:htmlMotionConfig,preloadedFeatures:e,useRender:createUseRender(r),createVisualElement:t,Component:s};return createRendererMotionComponent(i)}}function shallowCompare(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function resolveVariant(e,t,n){const s=e.getProps();return resolveVariantFromProps(s,t,n!==void 0?n:s.custom,e)}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0);class BaseGroupPlaybackControls{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>"finished"in t?t.finished:t))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let s=0;s<this.animations.length;s++)this.animations[s][t]=n}attachTimeline(t,n){const s=this.animations.map(r=>{if(supportsScrollTimeline()&&r.attachTimeline)return r.attachTimeline(t);if(typeof n=="function")return n(r)});return()=>{s.forEach((r,o)=>{r&&r(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class GroupPlaybackControls extends BaseGroupPlaybackControls{then(t,n){return Promise.all(this.animations).then(t).catch(n)}}function getValueTransition(e,t){return e?e[t]||e.default||e:void 0}const maxGeneratorDuration=2e4;function calcGeneratorDuration(e){let t=0;const n=50;let s=e.next(t);for(;!s.done&&t<maxGeneratorDuration;)t+=n,s=e.next(t);return t>=maxGeneratorDuration?1/0:t}function isGenerator(e){return typeof e=="function"}function attachTimeline(e,t){e.timeline=t,e.onfinish=null}const isBezierDefinition=e=>Array.isArray(e)&&typeof e[0]=="number",supportsFlags={linearEasing:void 0};function memoSupports(e,t){const n=memo(e);return()=>{var s;return(s=supportsFlags[t])!==null&&s!==void 0?s:n()}}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),generateLinearEasing=(e,t,n=10)=>{let s="";const r=Math.max(Math.round(t/n),2);for(let o=0;o<r;o++)s+=e(progress(0,r-1,o))+", ";return`linear(${s.substring(0,s.length-2)})`};function isWaapiSupportedEasing(e){return!!(typeof e=="function"&&supportsLinearEasing()||!e||typeof e=="string"&&(e in supportedWaapiEasing||supportsLinearEasing())||isBezierDefinition(e)||Array.isArray(e)&&e.every(isWaapiSupportedEasing))}const cubicBezierAsString=([e,t,n,s])=>`cubic-bezier(${e}, ${t}, ${n}, ${s})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(e,t){if(e)return typeof e=="function"&&supportsLinearEasing()?generateLinearEasing(e,t):isBezierDefinition(e)?cubicBezierAsString(e):Array.isArray(e)?e.map(n=>mapEasingToNativeEasing(n,t)||supportedWaapiEasing.easeOut):supportedWaapiEasing[e]}const isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function resolveElements(e,t,n){var s;if(e instanceof Element)return[e];if(typeof e=="string"){let r=document;const o=(s=void 0)!==null&&s!==void 0?s:r.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}function setupGesture(e,t){const n=resolveElements(e),s=new AbortController,r={passive:!0,...t,signal:s.signal};return[n,r,()=>s.abort()]}function filterEvents$1(e){return t=>{t.pointerType==="touch"||isDragActive()||e(t)}}function hover(e,t,n={}){const[s,r,o]=setupGesture(e,n),i=filterEvents$1(c=>{const{target:a}=c,u=t(c);if(typeof u!="function"||!a)return;const d=filterEvents$1(f=>{u(f),a.removeEventListener("pointerleave",d)});a.addEventListener("pointerleave",d,r)});return s.forEach(c=>{c.addEventListener("pointerenter",i,r)}),o}const isNodeOrChild=(e,t)=>t?e===t?!0:isNodeOrChild(e,t.parentElement):!1,isPrimaryPointer=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(e){return focusableElements.has(e.tagName)||e.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(e){return t=>{t.key==="Enter"&&e(t)}}function firePointerEvent(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(e,t)=>{const n=e.currentTarget;if(!n)return;const s=filterEvents(()=>{if(isPressing.has(n))return;firePointerEvent(n,"down");const r=filterEvents(()=>{firePointerEvent(n,"up")}),o=()=>firePointerEvent(n,"cancel");n.addEventListener("keyup",r,t),n.addEventListener("blur",o,t)});n.addEventListener("keydown",s,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",s),t)};function isValidPressEvent(e){return isPrimaryPointer(e)&&!isDragActive()}function press(e,t,n={}){const[s,r,o]=setupGesture(e,n),i=c=>{const a=c.currentTarget;if(!isValidPressEvent(c)||isPressing.has(a))return;isPressing.add(a);const u=t(c),d=(g,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",p),!(!isValidPressEvent(g)||!isPressing.has(a))&&(isPressing.delete(a),typeof u=="function"&&u(g,{success:x}))},f=g=>{d(g,n.useGlobalTarget||isNodeOrChild(a,g.target))},p=g=>{d(g,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",p,r)};return s.forEach(c=>{!isElementKeyboardAccessible(c)&&c.getAttribute("tabindex")===null&&(c.tabIndex=0),(n.useGlobalTarget?window:c).addEventListener("pointerdown",i,r),c.addEventListener("focus",u=>enableKeyboardPress(u,r),r)}),o}function setDragLock(e){return e==="x"||e==="y"?isDragging[e]?null:(isDragging[e]=!0,()=>{isDragging[e]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]);let now;function clearTime(){now=void 0}const time={now:()=>(now===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now),set:e=>{now=e,queueMicrotask(clearTime)}};function addUniqueItem(e,t){e.indexOf(t)===-1&&e.push(t)}function removeItem(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class SubscriptionManager{constructor(){this.subscriptions=[]}add(t){return addUniqueItem(this.subscriptions,t),()=>removeItem(this.subscriptions,t)}notify(t,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,s);else for(let o=0;o<r;o++){const i=this.subscriptions[o];i&&i(t,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function velocityPerSecond(e,t){return t?e*(1e3/t):0}const MAX_VELOCITY_DELTA=30,isFloat=e=>!isNaN(parseFloat(e));class MotionValue{constructor(t,n={}){this.version="11.18.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(s,r=!0)=>{const o=time.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(s),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=time.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new SubscriptionManager);const s=this.events[t].add(n);return t==="change"?()=>{s(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,s){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-s}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(e,t){return new MotionValue(e,t)}function setMotionValue(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,motionValue(n))}function setTarget(e,t){const n=resolveVariant(e,t);let{transitionEnd:s={},transition:r={},...o}=n||{};o={...o,...s};for(const i in o){const c=resolveFinalValueInKeyframes(o[i]);setMotionValue(e,i,c)}}function isWillChangeMotionValue(e){return!!(isMotionValue(e)&&e.add)}function addValueToWillChange(e,t){const n=e.getValue("willChange");if(isWillChangeMotionValue(n))return n.add(t)}function getOptimisedAppearId(e){return e.props[optimizedAppearDataAttribute]}const calcBezier=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(e,t,n,s,r){let o,i,c=0;do i=t+(n-t)/2,o=calcBezier(i,s,r)-e,o>0?n=i:t=i;while(Math.abs(o)>subdivisionPrecision&&++c<subdivisionMaxIterations);return i}function cubicBezier(e,t,n,s){if(e===t&&n===s)return noop;const r=o=>binarySubdivide(o,0,1,e,n);return o=>o===0||o===1?o:calcBezier(r(o),t,s)}const mirrorEasing=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,reverseEasing=e=>t=>1-e(1-t),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=e=>(e*=2)<1?.5*backIn(e):.5*(2-Math.pow(2,-10*(e-1))),circIn=e=>1-Math.sin(Math.acos(e)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),isZeroValueString=e=>/^0[^.\s]+$/u.test(e);function isNone(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||isZeroValueString(e):!0}const sanitize=e=>Math.round(e*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(e){return e==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(e,t)=>n=>!!(typeof n=="string"&&singleColorRegex.test(n)&&n.startsWith(e)||t&&!isNullish(n)&&Object.prototype.hasOwnProperty.call(n,t)),splitColor=(e,t,n)=>s=>{if(typeof s!="string")return s;const[r,o,i,c]=s.match(floatRegex);return{[e]:parseFloat(r),[t]:parseFloat(o),[n]:parseFloat(i),alpha:c!==void 0?parseFloat(c):1}},clampRgbUnit=e=>clamp(0,255,e),rgbUnit={...number,transform:e=>Math.round(clampRgbUnit(e))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:s=1})=>"rgba("+rgbUnit.transform(e)+", "+rgbUnit.transform(t)+", "+rgbUnit.transform(n)+", "+sanitize(alpha.transform(s))+")"};function parseHex(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const hex={test:isColorString("#"),parse:parseHex,transform:rgba.transform},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:s=1})=>"hsla("+Math.round(e)+", "+percent.transform(sanitize(t))+", "+percent.transform(sanitize(n))+", "+sanitize(alpha.transform(s))+")"},color={test:e=>rgba.test(e)||hex.test(e)||hsla.test(e),parse:e=>rgba.test(e)?rgba.parse(e):hsla.test(e)?hsla.parse(e):hex.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?rgba.transform(e):hsla.transform(e)},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(floatRegex))===null||t===void 0?void 0:t.length)||0)+(((n=e.match(colorRegex))===null||n===void 0?void 0:n.length)||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(e){const t=e.toString(),n=[],s={color:[],number:[],var:[]},r=[];let o=0;const c=t.replace(complexRegex,a=>(color.test(a)?(s.color.push(o),r.push(COLOR_TOKEN),n.push(color.parse(a))):a.startsWith(VAR_FUNCTION_TOKEN)?(s.var.push(o),r.push(VAR_TOKEN),n.push(a)):(s.number.push(o),r.push(NUMBER_TOKEN),n.push(parseFloat(a))),++o,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:n,split:c,indexes:s,types:r}}function parseComplexValue(e){return analyseComplexValue(e).values}function createTransformer(e){const{split:t,types:n}=analyseComplexValue(e),s=t.length;return r=>{let o="";for(let i=0;i<s;i++)if(o+=t[i],r[i]!==void 0){const c=n[i];c===NUMBER_TOKEN?o+=sanitize(r[i]):c===COLOR_TOKEN?o+=color.transform(r[i]):o+=r[i]}return o}}const convertNumbersToZero=e=>typeof e=="number"?0:e;function getAnimatableNone$1(e){const t=parseComplexValue(e);return createTransformer(e)(t.map(convertNumbersToZero))}const complex={test,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1},maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[s]=n.match(floatRegex)||[];if(!s)return e;const r=n.replace(s,"");let o=maxDefaults.has(t)?1:0;return s!==n&&(o*=100),t+"("+o+r+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:e=>{const t=e.match(functionRegex);return t?t.map(applyDefaultFilter).join(" "):e}},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=e=>defaultValueTypes[e];function getAnimatableNone(e,t){let n=getDefaultValueType(e);return n!==filter&&(n=complex),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(e,t,n){let s=0,r;for(;s<e.length&&!r;){const o=e[s];typeof o=="string"&&!invalidTemplates.has(o)&&analyseComplexValue(o).values.length&&(r=e[s]),s++}if(r&&n)for(const o of t)e[o]=getAnimatableNone(n,r)}const isNumOrPxType=e=>e===number||e===px,getPosFromMatrix=(e,t)=>parseFloat(e.split(", ")[t]),getTranslateFromMatrix=(e,t)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/u);if(r)return getPosFromMatrix(r[1],t);{const o=s.match(/^matrix\((.+)\)$/u);return o?getPosFromMatrix(o[1],e):0}},transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(e=>!transformKeys.has(e));function removeNonTranslationalTransform(e){const t=[];return nonTranslationalTransformKeys.forEach(n=>{const s=e.getValue(n);s!==void 0&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t}const positionalValues={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:getTranslateFromMatrix(4,13),y:getTranslateFromMatrix(5,14)};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const e=Array.from(toResolve).filter(s=>s.needsMeasurement),t=new Set(e.map(s=>s.element)),n=new Map;t.forEach(s=>{const r=removeNonTranslationalTransform(s);r.length&&(n.set(s,r),s.render())}),e.forEach(s=>s.measureInitialState()),t.forEach(s=>{s.render();const r=n.get(s);r&&r.forEach(([o,i])=>{var c;(c=s.getValue(o))===null||c===void 0||c.set(i)})}),e.forEach(s=>s.measureEndState()),e.forEach(s=>{s.suspendedScrollY!==void 0&&window.scrollTo(0,s.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(e=>e.complete()),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){readAllKeyframes(),measureAllKeyframes()}class KeyframeResolver{constructor(t,n,s,r,o,i=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=s,this.motionValue=r,this.element=o,this.isAsync=i}scheduleResolve(){this.isScheduled=!0,this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:s,motionValue:r}=this;for(let o=0;o<t.length;o++)if(t[o]===null)if(o===0){const i=r==null?void 0:r.get(),c=t[t.length-1];if(i!==void 0)t[0]=i;else if(s&&n){const a=s.readValue(n,c);a!=null&&(t[0]=a)}t[0]===void 0&&(t[0]=c),r&&i===void 0&&r.set(t[0])}else t[o]=t[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),toResolve.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,toResolve.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const isNumericalString=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(e){const t=splitCSSVariableRegex.exec(e);if(!t)return[,];const[,n,s,r]=t;return[`--${n??s}`,r]}function getVariableValue(e,t,n=1){const[s,r]=parseCSSVariable(e);if(!s)return;const o=window.getComputedStyle(t).getPropertyValue(s);if(o){const i=o.trim();return isNumericalString(i)?parseFloat(i):i}return isCSSVariableToken(r)?getVariableValue(r,t,n+1):r}const testValueType=e=>t=>t.test(e),auto={test:e=>e==="auto",parse:e=>e},dimensionValueTypes=[number,px,percent,degrees,vw,vh,auto],findDimensionValueType=e=>dimensionValueTypes.find(testValueType(e));class DOMKeyframesResolver extends KeyframeResolver{constructor(t,n,s,r,o){super(t,n,s,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:s}=this;if(!n||!n.current)return;super.readKeyframes();for(let a=0;a<t.length;a++){let u=t[a];if(typeof u=="string"&&(u=u.trim(),isCSSVariableToken(u))){const d=getVariableValue(u,n.current);d!==void 0&&(t[a]=d),a===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(s)||t.length!==2)return;const[r,o]=t,i=findDimensionValueType(r),c=findDimensionValueType(o);if(i!==c)if(isNumOrPxType(i)&&isNumOrPxType(c))for(let a=0;a<t.length;a++){const u=t[a];typeof u=="string"&&(t[a]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,s=[];for(let r=0;r<t.length;r++)isNone(t[r])&&s.push(r);s.length&&makeNoneKeyframesAnimatable(t,s,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:s}=this;if(!t||!t.current)return;s==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[s](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&t.getValue(s,r).jump(r,!1)}measureEndState(){var t;const{element:n,name:s,unresolvedKeyframes:r}=this;if(!n||!n.current)return;const o=n.getValue(s);o&&o.jump(this.measuredOrigin,!1);const i=r.length-1,c=r[i];r[i]=positionalValues[s](n.measureViewportBox(),window.getComputedStyle(n.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),!((t=this.removedTransforms)===null||t===void 0)&&t.length&&this.removedTransforms.forEach(([a,u])=>{n.getValue(a).set(u)}),this.resolveNoneKeyframes()}}const isAnimatable=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(complex.test(e)||e==="0")&&!e.startsWith("url("));function hasKeyframesChanged(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function canAnimate(e,t,n,s){const r=e[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const o=e[e.length-1],i=isAnimatable(r,t),c=isAnimatable(o,t);return!i||!c?!1:hasKeyframesChanged(e)||(n==="spring"||isGenerator(n))&&s}const isNotNull=e=>e!==null;function getFinalKeyframe(e,{repeat:t,repeatType:n="loop"},s){const r=e.filter(isNotNull),o=t&&n!=="loop"&&t%2===1?0:r.length-1;return!o||s===void 0?r[o]:s}const MAX_RESOLVE_DELAY=40;class BaseAnimation{constructor({autoplay:t=!0,delay:n=0,type:s="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:i="loop",...c}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=time.now(),this.options={autoplay:t,delay:n,type:s,repeat:r,repeatDelay:o,repeatType:i,...c},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&flushKeyframeResolvers(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=time.now(),this.hasAttemptedResolve=!0;const{name:s,type:r,velocity:o,delay:i,onComplete:c,onUpdate:a,isGenerator:u}=this.options;if(!u&&!canAnimate(t,s,r,o))if(i)this.options.duration=0;else{a==null||a(getFinalKeyframe(t,this.options,n)),c==null||c(),this.resolveFinishedPromise();return}const d=this.initPlayback(t,n);d!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const mixNumber$1=(e,t,n)=>e+(t-e)*n;function hueToRgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function hslaToRgba({hue:e,saturation:t,lightness:n,alpha:s}){e/=360,t/=100,n/=100;let r=0,o=0,i=0;if(!t)r=o=i=n;else{const c=n<.5?n*(1+t):n+t-n*t,a=2*n-c;r=hueToRgb(a,c,e+1/3),o=hueToRgb(a,c,e),i=hueToRgb(a,c,e-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(i*255),alpha:s}}function mixImmediate(e,t){return n=>n>0?t:e}const mixLinearColor=(e,t,n)=>{const s=e*e,r=n*(t*t-s)+s;return r<0?0:Math.sqrt(r)},colorTypes=[hex,rgba,hsla],getColorType=e=>colorTypes.find(t=>t.test(e));function asRGBA(e){const t=getColorType(e);if(!t)return!1;let n=t.parse(e);return t===hsla&&(n=hslaToRgba(n)),n}const mixColor=(e,t)=>{const n=asRGBA(e),s=asRGBA(t);if(!n||!s)return mixImmediate(e,t);const r={...n};return o=>(r.red=mixLinearColor(n.red,s.red,o),r.green=mixLinearColor(n.green,s.green,o),r.blue=mixLinearColor(n.blue,s.blue,o),r.alpha=mixNumber$1(n.alpha,s.alpha,o),rgba.transform(r))},combineFunctions=(e,t)=>n=>t(e(n)),pipe=(...e)=>e.reduce(combineFunctions),invisibleValues=new Set(["none","hidden"]);function mixVisibility(e,t){return invisibleValues.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function mixNumber(e,t){return n=>mixNumber$1(e,t,n)}function getMixer(e){return typeof e=="number"?mixNumber:typeof e=="string"?isCSSVariableToken(e)?mixImmediate:color.test(e)?mixColor:mixComplex:Array.isArray(e)?mixArray:typeof e=="object"?color.test(e)?mixColor:mixObject:mixImmediate}function mixArray(e,t){const n=[...e],s=n.length,r=e.map((o,i)=>getMixer(o)(o,t[i]));return o=>{for(let i=0;i<s;i++)n[i]=r[i](o);return n}}function mixObject(e,t){const n={...e,...t},s={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(s[r]=getMixer(e[r])(e[r],t[r]));return r=>{for(const o in s)n[o]=s[o](r);return n}}function matchOrder(e,t){var n;const s=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const i=t.types[o],c=e.indexes[i][r[i]],a=(n=e.values[c])!==null&&n!==void 0?n:0;s[o]=a,r[i]++}return s}const mixComplex=(e,t)=>{const n=complex.createTransformer(t),s=analyseComplexValue(e),r=analyseComplexValue(t);return s.indexes.var.length===r.indexes.var.length&&s.indexes.color.length===r.indexes.color.length&&s.indexes.number.length>=r.indexes.number.length?invisibleValues.has(e)&&!r.values.length||invisibleValues.has(t)&&!s.values.length?mixVisibility(e,t):pipe(mixArray(matchOrder(s,r),r.values),n):mixImmediate(e,t)};function mix(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?mixNumber$1(e,t,n):getMixer(e)(e,t)}const velocitySampleDuration=5;function calcGeneratorVelocity(e,t,n){const s=Math.max(t-velocitySampleDuration,0);return velocityPerSecond(n-e(s),t-s)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:e=springDefaults.duration,bounce:t=springDefaults.bounce,velocity:n=springDefaults.velocity,mass:s=springDefaults.mass}){let r,o,i=1-t;i=clamp(springDefaults.minDamping,springDefaults.maxDamping,i),e=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(e)),i<1?(r=u=>{const d=u*i,f=d*e,p=d-n,g=calcAngularFreq(u,i),x=Math.exp(-f);return safeMin-p/g*x},o=u=>{const f=u*i*e,p=f*n+n,g=Math.pow(i,2)*Math.pow(u,2)*e,x=Math.exp(-f),y=calcAngularFreq(Math.pow(u,2),i);return(-r(u)+safeMin>0?-1:1)*((p-g)*x)/y}):(r=u=>{const d=Math.exp(-u*e),f=(u-n)*e+1;return-.001+d*f},o=u=>{const d=Math.exp(-u*e),f=(n-u)*(e*e);return d*f});const c=5/e,a=approximateRoot(r,o,c);if(e=secondsToMilliseconds(e),isNaN(a))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:e};{const u=Math.pow(a,2)*s;return{stiffness:u,damping:i*2*Math.sqrt(s*u),duration:e}}}const rootIterations=12;function approximateRoot(e,t,n){let s=n;for(let r=1;r<rootIterations;r++)s=s-e(s)/t(s);return s}function calcAngularFreq(e,t){return e*Math.sqrt(1-t*t)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(e,t){return t.some(n=>e[n]!==void 0)}function getSpringOptions(e){let t={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...e};if(!isSpringType(e,physicsKeys)&&isSpringType(e,durationKeys))if(e.visualDuration){const n=e.visualDuration,s=2*Math.PI/(n*1.2),r=s*s,o=2*clamp(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:springDefaults.mass,stiffness:r,damping:o}}else{const n=findSpring(e);t={...t,...n,mass:springDefaults.mass},t.isResolvedFromDuration=!0}return t}function spring(e=springDefaults.visualDuration,t=springDefaults.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:r}=n;const o=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:a,damping:u,mass:d,duration:f,velocity:p,isResolvedFromDuration:g}=getSpringOptions({...n,velocity:-millisecondsToSeconds(n.velocity||0)}),x=p||0,y=u/(2*Math.sqrt(a*d)),P=i-o,b=millisecondsToSeconds(Math.sqrt(a/d)),T=Math.abs(P)<5;s||(s=T?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),r||(r=T?springDefaults.restDelta.granular:springDefaults.restDelta.default);let S;if(y<1){const E=calcAngularFreq(b,y);S=C=>{const w=Math.exp(-y*b*C);return i-w*((x+y*b*P)/E*Math.sin(E*C)+P*Math.cos(E*C))}}else if(y===1)S=E=>i-Math.exp(-b*E)*(P+(x+b*P)*E);else{const E=b*Math.sqrt(y*y-1);S=C=>{const w=Math.exp(-y*b*C),A=Math.min(E*C,300);return i-w*((x+y*b*P)*Math.sinh(A)+E*P*Math.cosh(A))/E}}const R={calculatedDuration:g&&f||null,next:E=>{const C=S(E);if(g)c.done=E>=f;else{let w=0;y<1&&(w=E===0?secondsToMilliseconds(x):calcGeneratorVelocity(S,E,C));const A=Math.abs(w)<=s,M=Math.abs(i-C)<=r;c.done=A&&M}return c.value=c.done?i:C,c},toString:()=>{const E=Math.min(calcGeneratorDuration(R),maxGeneratorDuration),C=generateLinearEasing(w=>R.next(E*w).value,E,30);return E+"ms "+C}};return R}function inertia({keyframes:e,velocity:t=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:i,min:c,max:a,restDelta:u=.5,restSpeed:d}){const f=e[0],p={done:!1,value:f},g=A=>c!==void 0&&A<c||a!==void 0&&A>a,x=A=>c===void 0?a:a===void 0||Math.abs(c-A)<Math.abs(a-A)?c:a;let y=n*t;const P=f+y,b=i===void 0?P:i(P);b!==P&&(y=b-f);const T=A=>-y*Math.exp(-A/s),S=A=>b+T(A),R=A=>{const M=T(A),V=S(A);p.done=Math.abs(M)<=u,p.value=p.done?b:V};let E,C;const w=A=>{g(p.value)&&(E=A,C=spring({keyframes:[p.value,x(p.value)],velocity:calcGeneratorVelocity(S,A,p.value),damping:r,stiffness:o,restDelta:u,restSpeed:d}))};return w(0),{calculatedDuration:null,next:A=>{let M=!1;return!C&&E===void 0&&(M=!0,R(A),w(A)),E!==void 0&&A>=E?C.next(A-E):(!M&&R(A),p)}}}const easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=e=>Array.isArray(e)&&typeof e[0]!="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},easingDefinitionToFunction=e=>{if(isBezierDefinition(e)){invariant(e.length===4);const[t,n,s,r]=e;return cubicBezier(t,n,s,r)}else if(typeof e=="string")return invariant(easingLookup[e]!==void 0),easingLookup[e];return e};function createMixers(e,t,n){const s=[],r=n||mix,o=e.length-1;for(let i=0;i<o;i++){let c=r(e[i],e[i+1]);if(t){const a=Array.isArray(t)?t[i]||noop:t;c=pipe(a,c)}s.push(c)}return s}function interpolate(e,t,{clamp:n=!0,ease:s,mixer:r}={}){const o=e.length;if(invariant(o===t.length),o===1)return()=>t[0];if(o===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[o-1]&&(e=[...e].reverse(),t=[...t].reverse());const c=createMixers(t,s,r),a=c.length,u=d=>{if(i&&d<e[0])return t[0];let f=0;if(a>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const p=progress(e[f],e[f+1],d);return c[f](p)};return n?d=>u(clamp(e[0],e[o-1],d)):u}function fillOffset(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=progress(0,t,s);e.push(mixNumber$1(n,1,r))}}function defaultOffset(e){const t=[0];return fillOffset(t,e.length-1),t}function convertOffsetToTimes(e,t){return e.map(n=>n*t)}function defaultEasing(e,t){return e.map(()=>t||easeInOut).splice(0,e.length-1)}function keyframes({duration:e=300,keyframes:t,times:n,ease:s="easeInOut"}){const r=isEasingArray(s)?s.map(easingDefinitionToFunction):easingDefinitionToFunction(s),o={done:!1,value:t[0]},i=convertOffsetToTimes(n&&n.length===t.length?n:defaultOffset(t),e),c=interpolate(i,t,{ease:Array.isArray(r)?r:defaultEasing(t,r)});return{calculatedDuration:e,next:a=>(o.value=c(a),o.done=a>=e,o)}}const frameloopDriver=e=>{const t=({timestamp:n})=>e(n);return{start:()=>frame.update(t,!0),stop:()=>cancelFrame(t),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generators={decay:inertia,inertia,tween:keyframes,keyframes,spring},percentToProgress=e=>e/100;class MainThreadAnimation extends BaseAnimation{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:a}=this.options;a&&a()};const{name:n,motionValue:s,element:r,keyframes:o}=this.options,i=(r==null?void 0:r.KeyframeResolver)||KeyframeResolver,c=(a,u)=>this.onKeyframesResolved(a,u);this.resolver=new i(o,c,n,s,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:s=0,repeatDelay:r=0,repeatType:o,velocity:i=0}=this.options,c=isGenerator(n)?n:generators[n]||keyframes;let a,u;c!==keyframes&&typeof t[0]!="number"&&(a=pipe(percentToProgress,mix(t[0],t[1])),t=[0,100]);const d=c({...this.options,keyframes:t});o==="mirror"&&(u=c({...this.options,keyframes:[...t].reverse(),velocity:-i})),d.calculatedDuration===null&&(d.calculatedDuration=calcGeneratorDuration(d));const{calculatedDuration:f}=d,p=f+r,g=p*(s+1)-r;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:a,calculatedDuration:f,resolvedDuration:p,totalDuration:g}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:s}=this;if(!s){const{keyframes:A}=this.options;return{done:!0,value:A[A.length-1]}}const{finalKeyframe:r,generator:o,mirroredGenerator:i,mapPercentToKeyframes:c,keyframes:a,calculatedDuration:u,totalDuration:d,resolvedDuration:f}=s;if(this.startTime===null)return o.next(0);const{delay:p,repeat:g,repeatType:x,repeatDelay:y,onUpdate:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-d/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const b=this.currentTime-p*(this.speed>=0?1:-1),T=this.speed>=0?b<0:b>d;this.currentTime=Math.max(b,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let S=this.currentTime,R=o;if(g){const A=Math.min(this.currentTime,d)/f;let M=Math.floor(A),V=A%1;!V&&A>=1&&(V=1),V===1&&M--,M=Math.min(M,g+1),!!(M%2)&&(x==="reverse"?(V=1-V,y&&(V-=y/f)):x==="mirror"&&(R=i)),S=clamp(0,1,V)*f}const E=T?{done:!1,value:a[0]}:R.next(S);c&&(E.value=c(E.value));let{done:C}=E;!T&&u!==null&&(C=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const w=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&C);return w&&r!==void 0&&(E.value=getFinalKeyframe(a,this.options,r)),P&&P(E.value),w&&this.finish(),E}get duration(){const{resolved:t}=this;return t?millisecondsToSeconds(t.calculatedDuration):0}get time(){return millisecondsToSeconds(this.currentTime)}set time(t){t=secondsToMilliseconds(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=frameloopDriver,onPlay:n,startTime:s}=this.options;this.driver||(this.driver=t(o=>this.tick(o))),n&&n();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=s??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var t;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(t=this.currentTime)!==null&&t!==void 0?t:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]);function startWaapiAnimation(e,t,n,{delay:s=0,duration:r=300,repeat:o=0,repeatType:i="loop",ease:c="easeInOut",times:a}={}){const u={[t]:n};a&&(u.offset=a);const d=mapEasingToNativeEasing(c,r);return Array.isArray(d)&&(u.easing=d),e.animate(u,{delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:i==="reverse"?"alternate":"normal"})}const supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),sampleDelta=10,maxDuration=2e4;function requiresPregeneratedKeyframes(e){return isGenerator(e.type)||e.type==="spring"||!isWaapiSupportedEasing(e.ease)}function pregenerateKeyframes(e,t){const n=new MainThreadAnimation({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let s={done:!1,value:e[0]};const r=[];let o=0;for(;!s.done&&o<maxDuration;)s=n.sample(o),r.push(s.value),o+=sampleDelta;return{times:void 0,keyframes:r,duration:o-sampleDelta,ease:"linear"}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(e){return e in unsupportedEasingFunctions}class AcceleratedAnimation extends BaseAnimation{constructor(t){super(t);const{name:n,motionValue:s,element:r,keyframes:o}=this.options;this.resolver=new DOMKeyframesResolver(o,(i,c)=>this.onKeyframesResolved(i,c),n,s,r),this.resolver.scheduleResolve()}initPlayback(t,n){var s;let{duration:r=300,times:o,ease:i,type:c,motionValue:a,name:u,startTime:d}=this.options;if(!(!((s=a.owner)===null||s===void 0)&&s.current))return!1;if(typeof i=="string"&&supportsLinearEasing()&&isUnsupportedEase(i)&&(i=unsupportedEasingFunctions[i]),requiresPregeneratedKeyframes(this.options)){const{onComplete:p,onUpdate:g,motionValue:x,element:y,...P}=this.options,b=pregenerateKeyframes(t,P);t=b.keyframes,t.length===1&&(t[1]=t[0]),r=b.duration,o=b.times,i=b.ease,c="keyframes"}const f=startWaapiAnimation(a.owner.current,u,t,{...this.options,duration:r,times:o,ease:i});return f.startTime=d??this.calcStartTime(),this.pendingTimeline?(attachTimeline(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:p}=this.options;a.set(getFinalKeyframe(t,this.options,n)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:r,times:o,type:c,ease:i,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return millisecondsToSeconds(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return millisecondsToSeconds(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.currentTime=secondsToMilliseconds(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:s}=n;s.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return noop;const{animation:s}=n;attachTimeline(s,t)}return noop}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:s,duration:r,type:o,ease:i,times:c}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:f,element:p,...g}=this.options,x=new MainThreadAnimation({...g,keyframes:s,duration:r,type:o,ease:i,times:c,isGenerator:!0}),y=secondsToMilliseconds(this.time);u.setWithVelocity(x.sample(y-sampleDelta).value,x.sample(y).value,sampleDelta)}const{onStop:a}=this.options;a&&a(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:s,repeatDelay:r,repeatType:o,damping:i,type:c}=t;return supportsWaapi()&&s&&acceleratedValues.has(s)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!r&&o!=="mirror"&&i!==0&&c!=="inertia"}}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(e,{keyframes:t})=>t.length>2?keyframesTransition:transformProps.has(e)?e.startsWith("scale")?criticallyDampedSpring(t[1]):underDampedSpring:ease;function isTransitionDefined({when:e,delay:t,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:o,repeatType:i,repeatDelay:c,from:a,elapsed:u,...d}){return!!Object.keys(d).length}const animateMotionValue=(e,t,n,s={},r,o)=>i=>{const c=getValueTransition(s,e)||{},a=c.delay||s.delay||0;let{elapsed:u=0}=s;u=u-secondsToMilliseconds(a);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...c,delay:-u,onUpdate:p=>{t.set(p),c.onUpdate&&c.onUpdate(p)},onComplete:()=>{i(),c.onComplete&&c.onComplete()},name:e,motionValue:t,element:o?void 0:r};isTransitionDefined(c)||(d={...d,...getDefaultTransition(e,d)}),d.duration&&(d.duration=secondsToMilliseconds(d.duration)),d.repeatDelay&&(d.repeatDelay=secondsToMilliseconds(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),f&&!o&&t.get()!==void 0){const p=getFinalKeyframe(d.keyframes,c);if(p!==void 0)return frame.update(()=>{d.onUpdate(p),d.onComplete()}),new GroupPlaybackControls([])}return!o&&AcceleratedAnimation.supports(d)?new AcceleratedAnimation(d):new MainThreadAnimation(d)};function shouldBlockAnimation({protectedKeys:e,needsAnimating:t},n){const s=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,s}function animateTarget(e,t,{delay:n=0,transitionOverride:s,type:r}={}){var o;let{transition:i=e.getDefaultTransition(),transitionEnd:c,...a}=t;s&&(i=s);const u=[],d=r&&e.animationState&&e.animationState.getState()[r];for(const f in a){const p=e.getValue(f,(o=e.latestValues[f])!==null&&o!==void 0?o:null),g=a[f];if(g===void 0||d&&shouldBlockAnimation(d,f))continue;const x={delay:n,...getValueTransition(i||{},f)};let y=!1;if(window.MotionHandoffAnimation){const b=getOptimisedAppearId(e);if(b){const T=window.MotionHandoffAnimation(b,f,frame);T!==null&&(x.startTime=T,y=!0)}}addValueToWillChange(e,f),p.start(animateMotionValue(f,p,g,e.shouldReduceMotion&&positionalKeys.has(f)?{type:!1}:x,e,y));const P=p.animation;P&&u.push(P)}return c&&Promise.all(u).then(()=>{frame.update(()=>{c&&setTarget(e,c)})}),u}function animateVariant(e,t,n={}){var s;const r=resolveVariant(e,t,n.type==="exit"?(s=e.presenceContext)===null||s===void 0?void 0:s.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const i=r?()=>Promise.all(animateTarget(e,r,n)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:p}=o;return animateChildren(e,t,d+u,f,p,n)}:()=>Promise.resolve(),{when:a}=o;if(a){const[u,d]=a==="beforeChildren"?[i,c]:[c,i];return u().then(()=>d())}else return Promise.all([i(),c(n.delay)])}function animateChildren(e,t,n=0,s=0,r=1,o){const i=[],c=(e.variantChildren.size-1)*s,a=r===1?(u=0)=>u*s:(u=0)=>c-u*s;return Array.from(e.variantChildren).sort(sortByTreeOrder).forEach((u,d)=>{u.notify("AnimationStart",t),i.push(animateVariant(u,t,{...o,delay:n+a(d)}).then(()=>u.notify("AnimationComplete",t)))}),Promise.all(i)}function sortByTreeOrder(e,t){return e.sortNodePosition(t)}function animateVisualElement(e,t,n={}){e.notify("AnimationStart",t);let s;if(Array.isArray(t)){const r=t.map(o=>animateVariant(e,o,n));s=Promise.all(r)}else if(typeof t=="string")s=animateVariant(e,t,n);else{const r=typeof t=="function"?resolveVariant(e,t,n.custom):t;s=Promise.all(animateTarget(e,r,n))}return s.then(()=>{e.notify("AnimationComplete",t)})}const numVariantProps=variantProps.length;function getVariantContext(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?getVariantContext(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<numVariantProps;n++){const s=variantProps[n],r=e.props[s];(isVariantLabel(r)||r===!1)&&(t[s]=r)}return t}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(e){return t=>Promise.all(t.map(({animation:n,options:s})=>animateVisualElement(e,n,s)))}function createAnimationState(e){let t=animateList(e),n=createState(),s=!0;const r=a=>(u,d)=>{var f;const p=resolveVariant(e,d,a==="exit"?(f=e.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(p){const{transition:g,transitionEnd:x,...y}=p;u={...u,...y,...x}}return u};function o(a){t=a(e)}function i(a){const{props:u}=e,d=getVariantContext(e.parent)||{},f=[],p=new Set;let g={},x=1/0;for(let P=0;P<numAnimationTypes;P++){const b=reversePriorityOrder[P],T=n[b],S=u[b]!==void 0?u[b]:d[b],R=isVariantLabel(S),E=b===a?T.isActive:null;E===!1&&(x=P);let C=S===d[b]&&S!==u[b]&&R;if(C&&s&&e.manuallyAnimateOnMount&&(C=!1),T.protectedKeys={...g},!T.isActive&&E===null||!S&&!T.prevProp||isAnimationControls(S)||typeof S=="boolean")continue;const w=checkVariantsDidChange(T.prevProp,S);let A=w||b===a&&T.isActive&&!C&&R||P>x&&R,M=!1;const V=Array.isArray(S)?S:[S];let G=V.reduce(r(b),{});E===!1&&(G={});const{prevResolvedValues:Q={}}=T,ne={...Q,...G},J=F=>{A=!0,p.has(F)&&(M=!0,p.delete(F)),T.needsAnimating[F]=!0;const K=e.getValue(F);K&&(K.liveStyle=!1)};for(const F in ne){const K=G[F],X=Q[F];if(g.hasOwnProperty(F))continue;let oe=!1;isKeyframesTarget(K)&&isKeyframesTarget(X)?oe=!shallowCompare(K,X):oe=K!==X,oe?K!=null?J(F):p.add(F):K!==void 0&&p.has(F)?J(F):T.protectedKeys[F]=!0}T.prevProp=S,T.prevResolvedValues=G,T.isActive&&(g={...g,...G}),s&&e.blockInitialAnimation&&(A=!1),A&&(!(C&&w)||M)&&f.push(...V.map(F=>({animation:F,options:{type:b}})))}if(p.size){const P={};p.forEach(b=>{const T=e.getBaseTarget(b),S=e.getValue(b);S&&(S.liveStyle=!0),P[b]=T??null}),f.push({animation:P})}let y=!!f.length;return s&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),s=!1,y?t(f):Promise.resolve()}function c(a,u){var d;if(n[a].isActive===u)return Promise.resolve();(d=e.variantChildren)===null||d===void 0||d.forEach(p=>{var g;return(g=p.animationState)===null||g===void 0?void 0:g.setActive(a,u)}),n[a].isActive=u;const f=i(a);for(const p in n)n[p].protectedKeys={};return f}return{animateChanges:i,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=createState(),s=!0}}}function checkVariantsDidChange(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!shallowCompare(t,e):!1}function createTypeState(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(t){this.isMounted=!1,this.node=t}update(){}}class AnimationFeature extends Feature{constructor(t){super(t),t.animationState||(t.animationState=createAnimationState(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();isAnimationControls(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)===null||t===void 0||t.call(this)}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===s)return;const r=this.node.animationState.setActive("exit",!t);n&&!t&&r.then(()=>n(this.id))}mount(){const{register:t}=this.node.presenceContext||{};t&&(this.unmount=t(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(e,t,n,s={passive:!0}){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}function extractEventInfo(e){return{point:{x:e.pageX,y:e.pageY}}}const addPointerInfo=e=>t=>isPrimaryPointer(t)&&e(t,extractEventInfo(t));function addPointerEvent(e,t,n,s){return addDomEvent(e,t,addPointerInfo(n),s)}const distance=(e,t)=>Math.abs(e-t);function distance2D(e,t){const n=distance(e.x,t.x),s=distance(e.y,t.y);return Math.sqrt(n**2+s**2)}class PanSession{constructor(t,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=getPanInfo(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,g=distance2D(f.offset,{x:0,y:0})>=3;if(!p&&!g)return;const{point:x}=f,{timestamp:y}=frameData;this.history.push({...x,timestamp:y});const{onStart:P,onMove:b}=this.handlers;p||(P&&P(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=transformPoint(p,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=getPanInfo(f.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(p,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,P),x&&x(f,P)},!isPrimaryPointer(t))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const i=extractEventInfo(t),c=transformPoint(i,this.transformPagePoint),{point:a}=c,{timestamp:u}=frameData;this.history=[{...a,timestamp:u}];const{onSessionStart:d}=n;d&&d(t,getPanInfo(c,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(e,t){return t?{point:t(e.point)}:e}function subtractPoint(e,t){return{x:e.x-t.x,y:e.y-t.y}}function getPanInfo({point:e},t){return{point:e,delta:subtractPoint(e,lastDevicePoint(t)),offset:subtractPoint(e,startDevicePoint(t)),velocity:getVelocity(t,.1)}}function startDevicePoint(e){return e[0]}function lastDevicePoint(e){return e[e.length-1]}function getVelocity(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=lastDevicePoint(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>secondsToMilliseconds(t)));)n--;if(!s)return{x:0,y:0};const o=millisecondsToSeconds(r.timestamp-s.timestamp);if(o===0)return{x:0,y:0};const i={x:(r.x-s.x)/o,y:(r.y-s.y)/o};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(e){return e.max-e.min}function isNear(e,t,n){return Math.abs(e-t)<=n}function calcAxisDelta(e,t,n,s=.5){e.origin=s,e.originPoint=mixNumber$1(t.min,t.max,e.origin),e.scale=calcLength(n)/calcLength(t),e.translate=mixNumber$1(n.min,n.max,e.origin)-e.originPoint,(e.scale>=SCALE_MIN&&e.scale<=SCALE_MAX||isNaN(e.scale))&&(e.scale=1),(e.translate>=TRANSLATE_MIN&&e.translate<=TRANSLATE_MAX||isNaN(e.translate))&&(e.translate=0)}function calcBoxDelta(e,t,n,s){calcAxisDelta(e.x,t.x,n.x,s?s.originX:void 0),calcAxisDelta(e.y,t.y,n.y,s?s.originY:void 0)}function calcRelativeAxis(e,t,n){e.min=n.min+t.min,e.max=e.min+calcLength(t)}function calcRelativeBox(e,t,n){calcRelativeAxis(e.x,t.x,n.x),calcRelativeAxis(e.y,t.y,n.y)}function calcRelativeAxisPosition(e,t,n){e.min=t.min-n.min,e.max=e.min+calcLength(t)}function calcRelativePosition(e,t,n){calcRelativeAxisPosition(e.x,t.x,n.x),calcRelativeAxisPosition(e.y,t.y,n.y)}function applyConstraints(e,{min:t,max:n},s){return t!==void 0&&e<t?e=s?mixNumber$1(t,e,s.min):Math.max(e,t):n!==void 0&&e>n&&(e=s?mixNumber$1(n,e,s.max):Math.min(e,n)),e}function calcRelativeAxisConstraints(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function calcRelativeConstraints(e,{top:t,left:n,bottom:s,right:r}){return{x:calcRelativeAxisConstraints(e.x,n,r),y:calcRelativeAxisConstraints(e.y,t,s)}}function calcViewportAxisConstraints(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}function calcViewportConstraints(e,t){return{x:calcViewportAxisConstraints(e.x,t.x),y:calcViewportAxisConstraints(e.y,t.y)}}function calcOrigin(e,t){let n=.5;const s=calcLength(e),r=calcLength(t);return r>s?n=progress(t.min,t.max-s,e.min):s>r&&(n=progress(e.min,e.max-r,t.min)),clamp(0,1,n)}function rebaseAxisConstraints(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const defaultElastic=.35;function resolveDragElastic(e=defaultElastic){return e===!1?e=0:e===!0&&(e=defaultElastic),{x:resolveAxisElastic(e,"left","right"),y:resolveAxisElastic(e,"top","bottom")}}function resolveAxisElastic(e,t,n){return{min:resolvePointElastic(e,t),max:resolvePointElastic(e,n)}}function resolvePointElastic(e,t){return typeof e=="number"?e:e[t]||0}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()});function eachAxis(e){return[e("x"),e("y")]}function convertBoundingBoxToBox({top:e,left:t,right:n,bottom:s}){return{x:{min:t,max:n},y:{min:e,max:s}}}function convertBoxToBoundingBox({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function transformBoxPoints(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function isIdentityScale(e){return e===void 0||e===1}function hasScale({scale:e,scaleX:t,scaleY:n}){return!isIdentityScale(e)||!isIdentityScale(t)||!isIdentityScale(n)}function hasTransform(e){return hasScale(e)||has2DTranslate(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function has2DTranslate(e){return is2DTranslate(e.x)||is2DTranslate(e.y)}function is2DTranslate(e){return e&&e!=="0%"}function scalePoint(e,t,n){const s=e-n,r=t*s;return n+r}function applyPointDelta(e,t,n,s,r){return r!==void 0&&(e=scalePoint(e,r,s)),scalePoint(e,n,s)+t}function applyAxisDelta(e,t=0,n=1,s,r){e.min=applyPointDelta(e.min,t,n,s,r),e.max=applyPointDelta(e.max,t,n,s,r)}function applyBoxDelta(e,{x:t,y:n}){applyAxisDelta(e.x,t.translate,t.scale,t.originPoint),applyAxisDelta(e.y,n.translate,n.scale,n.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(e,t,n,s=!1){const r=n.length;if(!r)return;t.x=t.y=1;let o,i;for(let c=0;c<r;c++){o=n[c],i=o.projectionDelta;const{visualElement:a}=o.options;a&&a.props.style&&a.props.style.display==="contents"||(s&&o.options.layoutScroll&&o.scroll&&o!==o.root&&transformBox(e,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,applyBoxDelta(e,i)),s&&hasTransform(o.latestValues)&&transformBox(e,o.latestValues))}t.x<TREE_SCALE_SNAP_MAX&&t.x>TREE_SCALE_SNAP_MIN&&(t.x=1),t.y<TREE_SCALE_SNAP_MAX&&t.y>TREE_SCALE_SNAP_MIN&&(t.y=1)}function translateAxis(e,t){e.min=e.min+t,e.max=e.max+t}function transformAxis(e,t,n,s,r=.5){const o=mixNumber$1(e.min,e.max,r);applyAxisDelta(e,t,n,o,s)}function transformBox(e,t){transformAxis(e.x,t.x,t.scaleX,t.scale,t.originX),transformAxis(e.y,t.y,t.scaleY,t.scale,t.originY)}function measureViewportBox(e,t){return convertBoundingBoxToBox(transformBoxPoints(e.getBoundingClientRect(),t))}function measurePageBox(e,t,n){const s=measureViewportBox(e,n),{scroll:r}=t;return r&&(translateAxis(s.x,r.offset.x),translateAxis(s.y,r.offset.y)),s}const getContextWindow=({current:e})=>e?e.ownerDocument.defaultView:null,elementDragControls=new WeakMap;class VisualElementDragControls{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(extractEventInfo(d).point)},o=(d,f)=>{const{drag:p,dragPropagation:g,onDragStart:x}=this.getProps();if(p&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(p),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(P=>{let b=this.getAxisMotionValue(P).get()||0;if(percent.test(b)){const{projection:T}=this.visualElement;if(T&&T.layout){const S=T.layout.layoutBox[P];S&&(b=calcLength(S)*(parseFloat(b)/100))}}this.originPoint[P]=b}),x&&frame.postRender(()=>x(d,f)),addValueToWillChange(this.visualElement,"transform");const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},i=(d,f)=>{const{dragPropagation:p,dragDirectionLock:g,onDirectionLock:x,onDrag:y}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:P}=f;if(g&&this.currentDirection===null){this.currentDirection=getCurrentDirection(P),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,P),this.updateAxis("y",f.point,P),this.visualElement.render(),y&&y(d,f)},c=(d,f)=>this.stop(d,f),a=()=>eachAxis(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new PanSession(t,{onSessionStart:r,onStart:o,onMove:i,onSessionEnd:c,resumeAnimation:a},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:getContextWindow(this.visualElement)})}stop(t,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:o}=this.getProps();o&&frame.postRender(()=>o(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,s){const{drag:r}=this.getProps();if(!s||!shouldDrag(t,r,this.currentDirection))return;const o=this.getAxisMotionValue(t);let i=this.originPoint[t]+s[t];this.constraints&&this.constraints[t]&&(i=applyConstraints(i,this.constraints[t],this.elastic[t])),o.set(i)}resolveConstraints(){var t;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(t=this.visualElement.projection)===null||t===void 0?void 0:t.layout,o=this.constraints;n&&isRefObject(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=calcRelativeConstraints(r.layoutBox,n):this.constraints=!1,this.elastic=resolveDragElastic(s),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=rebaseAxisConstraints(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!isRefObject(t))return!1;const s=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=measurePageBox(s,r.root,this.visualElement.getTransformPagePoint());let i=calcViewportConstraints(r.layout.layoutBox,o);if(n){const c=n(convertBoxToBoundingBox(i));this.hasMutatedConstraints=!!c,c&&(i=convertBoundingBoxToBox(c))}return i}startAnimation(t){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:o,dragSnapToOrigin:i,onDragTransitionEnd:c}=this.getProps(),a=this.constraints||{},u=eachAxis(d=>{if(!shouldDrag(d,n,this.currentDirection))return;let f=a[d]||{};i&&(f={min:0,max:0});const p=r?200:1e6,g=r?40:1e7,x={type:"inertia",velocity:s?t[d]:0,bounceStiffness:p,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...f};return this.startAxisValueAnimation(d,x)});return Promise.all(u).then(c)}startAxisValueAnimation(t,n){const s=this.getAxisMotionValue(t);return addValueToWillChange(this.visualElement,t),s.start(animateMotionValue(t,s,0,n,this.visualElement,!1))}stopAnimation(){eachAxis(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){eachAxis(t=>{var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(t,(s.initial?s.initial[t]:void 0)||0)}snapToCursor(t){eachAxis(n=>{const{drag:s}=this.getProps();if(!shouldDrag(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:i,max:c}=r.layout.layoutBox[n];o.set(t[n]-mixNumber$1(i,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!isRefObject(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};eachAxis(i=>{const c=this.getAxisMotionValue(i);if(c&&this.constraints!==!1){const a=c.get();r[i]=calcOrigin({min:a,max:a},this.constraints[i])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),eachAxis(i=>{if(!shouldDrag(i,t,null))return;const c=this.getAxisMotionValue(i),{min:a,max:u}=this.constraints[i];c.set(mixNumber$1(a,u,r[i]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const t=this.visualElement.current,n=addPointerEvent(t,"pointerdown",a=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(a)}),s=()=>{const{dragConstraints:a}=this.getProps();isRefObject(a)&&a.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),frame.read(s);const i=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",({delta:a,hasLayoutChanged:u})=>{this.isDragging&&u&&(eachAxis(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=a[d].translate,f.set(f.get()+a[d].translate))}),this.visualElement.render())});return()=>{i(),n(),o(),c&&c()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:i=defaultElastic,dragMomentum:c=!0}=t;return{...t,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:o,dragElastic:i,dragMomentum:c}}}function shouldDrag(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function getCurrentDirection(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class DragGesture extends Feature{constructor(t){super(t),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=e=>(t,n)=>{e&&frame.postRender(()=>e(t,n))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(t){this.session=new PanSession(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:asyncHandler(t),onStart:asyncHandler(n),onMove:s,onEnd:(o,i)=>{delete this.session,r&&frame.postRender(()=>r(o,i))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const correctBorderRadius={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(px.test(e))e=parseFloat(e);else return e;const n=pixelsToPercent(e,t.target.x),s=pixelsToPercent(e,t.target.y);return`${n}% ${s}%`}},correctBoxShadow={correct:(e,{treeScale:t,projectionDelta:n})=>{const s=e,r=complex.parse(e);if(r.length>5)return s;const o=complex.createTransformer(e),i=typeof r[0]!="number"?1:0,c=n.x.scale*t.x,a=n.y.scale*t.y;r[0+i]/=c,r[1+i]/=a;const u=mixNumber$1(c,a,.5);return typeof r[2+i]=="number"&&(r[2+i]/=u),typeof r[3+i]=="number"&&(r[3+i]/=u),o(r)}};class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:o}=t;addScaleCorrector(defaultScaleCorrectors),o&&(n.group&&n.group.add(o),s&&s.register&&r&&s.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:s,drag:r,isPresent:o}=this.props,i=s.projection;return i&&(i.isPresent=o,r||t.layoutDependency!==n||n===void 0?i.willUpdate():this.safeToRemove(),t.isPresent!==o&&(o?i.promote():i.relegate()||frame.postRender(()=>{const c=i.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),microtask.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function MeasureLayout(e){const[t,n]=usePresence(),s=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...e,layoutGroup:s,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:t,safeToRemove:n})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(e,t,n){const s=isMotionValue(e)?e:motionValue(e);return s.start(animateMotionValue("",s,t,n)),s.animation}function isSVGElement(e){return e instanceof SVGElement&&e.tagName!=="svg"}const compareByDepth=(e,t)=>e.depth-t.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(t){addUniqueItem(this.children,t),this.isDirty=!0}remove(t){removeItem(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(t)}}function delay(e,t){const n=time.now(),s=({timestamp:r})=>{const o=r-n;o>=t&&(cancelFrame(s),e(o-t))};return frame.read(s,!0),()=>cancelFrame(s)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=e=>typeof e=="string"?parseFloat(e):e,isPx=e=>typeof e=="number"||px.test(e);function mixValues(e,t,n,s,r,o){r?(e.opacity=mixNumber$1(0,n.opacity!==void 0?n.opacity:1,easeCrossfadeIn(s)),e.opacityExit=mixNumber$1(t.opacity!==void 0?t.opacity:1,0,easeCrossfadeOut(s))):o&&(e.opacity=mixNumber$1(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let i=0;i<numBorders;i++){const c=`border${borders[i]}Radius`;let a=getRadius(t,c),u=getRadius(n,c);if(a===void 0&&u===void 0)continue;a||(a=0),u||(u=0),a===0||u===0||isPx(a)===isPx(u)?(e[c]=Math.max(mixNumber$1(asNumber(a),asNumber(u),s),0),(percent.test(u)||percent.test(a))&&(e[c]+="%")):e[c]=u}(t.rotate||n.rotate)&&(e.rotate=mixNumber$1(t.rotate||0,n.rotate||0,s))}function getRadius(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(e,t,n){return s=>s<e?0:s>t?1:n(progress(e,t,s))}function copyAxisInto(e,t){e.min=t.min,e.max=t.max}function copyBoxInto(e,t){copyAxisInto(e.x,t.x),copyAxisInto(e.y,t.y)}function copyAxisDeltaInto(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function removePointDelta(e,t,n,s,r){return e-=t,e=scalePoint(e,1/n,s),r!==void 0&&(e=scalePoint(e,1/r,s)),e}function removeAxisDelta(e,t=0,n=1,s=.5,r,o=e,i=e){if(percent.test(t)&&(t=parseFloat(t),t=mixNumber$1(i.min,i.max,t/100)-i.min),typeof t!="number")return;let c=mixNumber$1(o.min,o.max,s);e===o&&(c-=t),e.min=removePointDelta(e.min,t,n,c,r),e.max=removePointDelta(e.max,t,n,c,r)}function removeAxisTransforms(e,t,[n,s,r],o,i){removeAxisDelta(e,t[n],t[s],t[r],t.scale,o,i)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(e,t,n,s){removeAxisTransforms(e.x,t,xKeys,n?n.x:void 0,s?s.x:void 0),removeAxisTransforms(e.y,t,yKeys,n?n.y:void 0,s?s.y:void 0)}function isAxisDeltaZero(e){return e.translate===0&&e.scale===1}function isDeltaZero(e){return isAxisDeltaZero(e.x)&&isAxisDeltaZero(e.y)}function axisEquals(e,t){return e.min===t.min&&e.max===t.max}function boxEquals(e,t){return axisEquals(e.x,t.x)&&axisEquals(e.y,t.y)}function axisEqualsRounded(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function boxEqualsRounded(e,t){return axisEqualsRounded(e.x,t.x)&&axisEqualsRounded(e.y,t.y)}function aspectRatio(e){return calcLength(e.x)/calcLength(e.y)}function axisDeltaEquals(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class NodeStack{constructor(){this.members=[]}add(t){addUniqueItem(this.members,t),t.scheduleRender()}remove(t){if(removeItem(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){s=o;break}}return s?(this.promote(s),!0):!1}promote(t,n){const s=this.lead;if(t!==s&&(this.prevLead=s,this.lead=t,t.show(),s)){s.instance&&s.scheduleRender(),t.scheduleRender(),t.resumeFrom=s,n&&(t.resumeFrom.preserveOpacity=!0),s.snapshot&&(t.snapshot=s.snapshot,t.snapshot.latestValues=s.animationValues||s.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:s}=t;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(e,t,n){let s="";const r=e.x.translate/t.x,o=e.y.translate/t.y,i=(n==null?void 0:n.z)||0;if((r||o||i)&&(s=`translate3d(${r}px, ${o}px, ${i}px) `),(t.x!==1||t.y!==1)&&(s+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:f,rotateY:p,skewX:g,skewY:x}=n;u&&(s=`perspective(${u}px) ${s}`),d&&(s+=`rotate(${d}deg) `),f&&(s+=`rotateX(${f}deg) `),p&&(s+=`rotateY(${p}deg) `),g&&(s+=`skewX(${g}deg) `),x&&(s+=`skewY(${x}deg) `)}const c=e.x.scale*t.x,a=e.y.scale*t.y;return(c!==1||a!==1)&&(s+=`scale(${c}, ${a})`),s||"none"}const metrics={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},isDebug=typeof window<"u"&&window.MotionDebug!==void 0,transformAxes=["","X","Y","Z"],hiddenVisibility={visibility:"hidden"},animationTarget=1e3;let id=0;function resetDistortingTransform(e,t,n,s){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),s&&(s[e]=0))}function cancelTreeOptimisedTransformAnimations(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=getOptimisedAppearId(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",frame,!(r||o))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(s)}function createProjectionNode({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(i={},c=t==null?void 0:t()){this.id=id++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,isDebug&&(metrics.totalNodes=metrics.resolvedTargetDeltas=metrics.recalculatedProjection=0),this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes),isDebug&&window.MotionDebug.record(metrics)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let a=0;a<this.path.length;a++)this.path[a].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(i,c){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new SubscriptionManager),this.eventHandlers.get(i).add(c)}notifyListeners(i,...c){const a=this.eventHandlers.get(i);a&&a.notify(...c)}hasListeners(i){return this.eventHandlers.has(i)}mount(i,c=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=isSVGElement(i),this.instance=i;const{layoutId:a,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),c&&(u||a)&&(this.isLayoutDirty=!0),e){let f;const p=()=>this.root.updateBlockedByResize=!1;e(i,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=delay(p,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&d&&(a||u)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:p,hasRelativeTargetChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||d.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:P,onLayoutAnimationComplete:b}=d.getProps(),T=!this.targetLayout||!boxEqualsRounded(this.targetLayout,x)||g,S=!p&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||p&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,S);const R={...getValueTransition(y,"layout"),onPlay:P,onComplete:b};(d.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else p||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:c,layout:a}=this.options;if(c===void 0&&!a)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}this.isUpdating||this.nodes.forEach(clearIsLayoutDirty),this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots();const c=time.now();frameData.delta=clamp(0,1e3/60,c-frameData.timestamp),frameData.timestamp=c,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let a=0;a<this.path.length;a++)this.path[a].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(c=!1),c){const a=s(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:a,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:a}}}resetTransform(){if(!r)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!isDeltaZero(this.projectionDelta),a=this.getTransformTemplate(),u=a?a(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;i&&(c||hasTransform(this.latestValues)||d)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const c=this.measurePageBox();let a=this.removeElementScroll(c);return i&&(a=this.removeTransform(a)),roundBox(a),{animationId:this.root.animationId,measuredBox:c,layoutBox:a,latestValues:{},source:this.id}}measurePageBox(){var i;const{visualElement:c}=this.options;if(!c)return createBox();const a=c.measureViewportBox();if(!(((i=this.scroll)===null||i===void 0?void 0:i.wasRoot)||this.path.some(checkNodeWasScrollRoot))){const{scroll:d}=this.root;d&&(translateAxis(a.x,d.offset.x),translateAxis(a.y,d.offset.y))}return a}removeElementScroll(i){var c;const a=createBox();if(copyBoxInto(a,i),!((c=this.scroll)===null||c===void 0)&&c.wasRoot)return a;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:f,options:p}=d;d!==this.root&&f&&p.layoutScroll&&(f.wasRoot&&copyBoxInto(a,i),translateAxis(a.x,f.offset.x),translateAxis(a.y,f.offset.y))}return a}applyTransform(i,c=!1){const a=createBox();copyBoxInto(a,i);for(let u=0;u<this.path.length;u++){const d=this.path[u];!c&&d.options.layoutScroll&&d.scroll&&d!==d.root&&transformBox(a,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),hasTransform(d.latestValues)&&transformBox(a,d.latestValues)}return hasTransform(this.latestValues)&&transformBox(a,this.latestValues),a}removeTransform(i){const c=createBox();copyBoxInto(c,i);for(let a=0;a<this.path.length;a++){const u=this.path[a];if(!u.instance||!hasTransform(u.latestValues))continue;hasScale(u.latestValues)&&u.updateSnapshot();const d=createBox(),f=u.measurePageBox();copyBoxInto(d,f),removeBoxTransforms(c,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return hasTransform(this.latestValues)&&removeBoxTransforms(c,this.latestValues),c}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var c;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==a;if(!(i||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((c=this.parent)===null||c===void 0)&&c.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:p}=this.options;if(!(!this.layout||!(f||p))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,g.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}isDebug&&metrics.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var i;const c=this.getLead(),a=!!this.resumingFrom||this!==c;let u=!0;if((this.isProjectionDirty||!((i=this.parent)===null||i===void 0)&&i.isProjectionDirty)&&(u=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(u=!1),u)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,a),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=createBox());const{target:x}=c;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),isDebug&&metrics.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var c;if((c=this.options.visualElement)===null||c===void 0||c.scheduleRender(),i){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(i,c=!1){const a=this.snapshot,u=a?a.latestValues:{},d={...this.latestValues},f=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const p=createBox(),g=a?a.source:void 0,x=this.layout?this.layout.source:void 0,y=g!==x,P=this.getStack(),b=!P||P.members.length<=1,T=!!(y&&!b&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let S;this.mixTargetDelta=R=>{const E=R/1e3;mixAxisDelta(f.x,i.x,E),mixAxisDelta(f.y,i.y,E),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,p,E),S&&boxEquals(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=createBox()),copyBoxInto(S,this.relativeTarget)),y&&(this.animationValues=d,mixValues(d,u,this.latestValues,E,T,b)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=E},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.currentAnimation=animateSingleValue(0,animationTarget,{...i,onUpdate:c=>{this.mixTargetDelta(c),i.onUpdate&&i.onUpdate(c)},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:c,target:a,layout:u,latestValues:d}=i;if(!(!c||!a||!u)){if(this!==i&&this.layout&&u&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,u.layoutBox)){a=this.target||createBox();const f=calcLength(this.layout.layoutBox.x);a.x.min=i.target.x.min,a.x.max=a.x.min+f;const p=calcLength(this.layout.layoutBox.y);a.y.min=i.target.y.min,a.y.max=a.y.min+p}copyBoxInto(c,a),transformBox(c,d),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,c,d)}}registerSharedNode(i,c){this.sharedNodes.has(i)||this.sharedNodes.set(i,new NodeStack),this.sharedNodes.get(i).add(c);const u=c.options.initialPromotionConfig;c.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(c):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var i;const{layoutId:c}=this.options;return c?((i=this.getStack())===null||i===void 0?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:c}=this.options;return c?(i=this.getStack())===null||i===void 0?void 0:i.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:c,preserveFollowOpacity:a}={}){const u=this.getStack();u&&u.promote(this,a),i&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let c=!1;const{latestValues:a}=i;if((a.z||a.rotate||a.rotateX||a.rotateY||a.rotateZ||a.skewX||a.skewY)&&(c=!0),!c)return;const u={};a.z&&resetDistortingTransform("z",i,u,this.animationValues);for(let d=0;d<transformAxes.length;d++)resetDistortingTransform(`rotate${transformAxes[d]}`,i,u,this.animationValues),resetDistortingTransform(`skew${transformAxes[d]}`,i,u,this.animationValues);i.render();for(const d in u)i.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);i.scheduleRender()}getProjectionStyles(i){var c,a;if(!this.instance||this.isSVG)return;if(!this.isVisible)return hiddenVisibility;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=resolveMotionValue(i==null?void 0:i.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=resolveMotionValue(i==null?void 0:i.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(y.transform=d?d({},""):"none",this.hasProjected=!1),y}const p=f.animationValues||f.latestValues;this.applyTransformsToTarget(),u.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,p),d&&(u.transform=d(p,u.transform));const{x:g,y:x}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,f.animationValues?u.opacity=f===this?(a=(c=p.opacity)!==null&&c!==void 0?c:this.latestValues.opacity)!==null&&a!==void 0?a:1:this.preserveOpacity?this.latestValues.opacity:p.opacityExit:u.opacity=f===this?p.opacity!==void 0?p.opacity:"":p.opacityExit!==void 0?p.opacityExit:0;for(const y in scaleCorrectors){if(p[y]===void 0)continue;const{correct:P,applyTo:b}=scaleCorrectors[y],T=u.transform==="none"?p[y]:P(p[y],f);if(b){const S=b.length;for(let R=0;R<S;R++)u[b[R]]=T}else u[y]=T}return this.options.layoutId&&(u.pointerEvents=f===this?resolveMotionValue(i==null?void 0:i.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var c;return(c=i.currentAnimation)===null||c===void 0?void 0:c.stop()}),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(e){e.updateLayout()}function notifyLayoutUpdate(e){var t;const n=((t=e.resumeFrom)===null||t===void 0?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=e.layout,{animationType:o}=e.options,i=n.source!==e.layout.source;o==="size"?eachAxis(f=>{const p=i?n.measuredBox[f]:n.layoutBox[f],g=calcLength(p);p.min=s[f].min,p.max=p.min+g}):shouldAnimatePositionOnly(o,n.layoutBox,s)&&eachAxis(f=>{const p=i?n.measuredBox[f]:n.layoutBox[f],g=calcLength(s[f]);p.max=p.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+g)});const c=createDelta();calcBoxDelta(c,s,n.layoutBox);const a=createDelta();i?calcBoxDelta(a,e.applyTransform(r,!0),n.measuredBox):calcBoxDelta(a,s,n.layoutBox);const u=!isDeltaZero(c);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:p,layout:g}=f;if(p&&g){const x=createBox();calcRelativePosition(x,n.layoutBox,p.layoutBox);const y=createBox();calcRelativePosition(y,s,g.layoutBox),boxEqualsRounded(x,y)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=y,e.relativeTargetOrigin=x,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:a,layoutDelta:c,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(e.isLead()){const{onExitComplete:s}=e.options;s&&s()}e.options.transition=void 0}function propagateDirtyNodes(e){isDebug&&metrics.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function cleanDirtyNodes(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function clearSnapshot(e){e.clearSnapshot()}function clearMeasurements(e){e.clearMeasurements()}function clearIsLayoutDirty(e){e.isLayoutDirty=!1}function resetTransformStyle(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function finishAnimation(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function resolveTargetDelta(e){e.resolveTargetDelta()}function calcProjection(e){e.calcProjection()}function resetSkewAndRotation(e){e.resetSkewAndRotation()}function removeLeadSnapshots(e){e.removeLeadSnapshot()}function mixAxisDelta(e,t,n){e.translate=mixNumber$1(t.translate,0,n),e.scale=mixNumber$1(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function mixAxis(e,t,n,s){e.min=mixNumber$1(t.min,n.min,s),e.max=mixNumber$1(t.max,n.max,s)}function mixBox(e,t,n,s){mixAxis(e.x,t.x,n.x,s),mixAxis(e.y,t.y,n.y,s)}function hasOpacityCrossfade(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(e){e.min=roundPoint(e.min),e.max=roundPoint(e.max)}function roundBox(e){roundAxis(e.x),roundAxis(e.y)}function shouldAnimatePositionOnly(e,t,n){return e==="position"||e==="preserve-aspect"&&!isNear(aspectRatio(t),aspectRatio(n),.2)}function checkNodeWasScrollRoot(e){var t;return e!==e.root&&((t=e.scroll)===null||t===void 0?void 0:t.wasRoot)}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(e,t)=>addDomEvent(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const e=new DocumentProjectionNode({});e.mount(window),e.setOptions({layoutScroll:!0}),rootProjectionNode.current=e}return rootProjectionNode.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(e,t,n){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=s[r];o&&frame.postRender(()=>o(t,extractEventInfo(t)))}class HoverGesture extends Feature{mount(){const{current:t}=this.node;t&&(this.unmount=hover(t,n=>(handleHoverEvent(this.node,n,"Start"),s=>handleHoverEvent(this.node,s,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(e,t,n){const{props:s}=e;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=s[r];o&&frame.postRender(()=>o(t,extractEventInfo(t)))}class PressGesture extends Feature{mount(){const{current:t}=this.node;t&&(this.unmount=press(t,n=>(handlePressEvent(this.node,n,"Start"),(s,{success:r})=>handlePressEvent(this.node,s,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=e=>{const t=observerCallbacks.get(e.target);t&&t(e)},fireAllObserverCallbacks=e=>{e.forEach(fireObserverCallback)};function initIntersectionObserver({root:e,...t}){const n=e||document;observers.has(n)||observers.set(n,{});const s=observers.get(n),r=JSON.stringify(t);return s[r]||(s[r]=new IntersectionObserver(fireAllObserverCallbacks,{root:e,...t})),s[r]}function observeIntersection(e,t,n){const s=initIntersectionObserver(t);return observerCallbacks.set(e,n),s.observe(e),()=>{observerCallbacks.delete(e),s.unobserve(e)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:o}=t,i={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:thresholdNames[r]},c=a=>{const{isIntersecting:u}=a;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),p=u?d:f;p&&p(a)};return observeIntersection(this.node.current,i,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(t,n))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>prefersReducedMotion.current=e.matches;e.addListener(t),t()}else prefersReducedMotion.current=!1}const valueTypes=[...dimensionValueTypes,color,complex],findValueType=e=>valueTypes.find(testValueType(e)),visualElementStore=new WeakMap;function updateMotionValuesFromProps(e,t,n){for(const s in t){const r=t[s],o=n[s];if(isMotionValue(r))e.addValue(s,r);else if(isMotionValue(o))e.addValue(s,motionValue(r,{owner:e}));else if(o!==r)if(e.hasValue(s)){const i=e.getValue(s);i.liveStyle===!0?i.jump(r):i.hasAnimated||i.set(r)}else{const i=e.getStaticValue(s);e.addValue(s,motionValue(i!==void 0?i:r,{owner:e}))}}for(const s in n)t[s]===void 0&&e.removeValue(s);return t}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(t,n,s){return{}}constructor({parent:t,props:n,presenceContext:s,reducedMotionConfig:r,blockInitialAnimation:o,visualState:i},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=time.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,frame.render(this.render,!1,!0))};const{latestValues:a,renderState:u,onUpdate:d}=i;this.onUpdate=d,this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=isControllingVariants(n),this.isVariantNode=isVariantNode(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const x=p[g];a[g]!==void 0&&isMotionValue(x)&&x.set(a[g],!1)}}mount(t){this.current=t,visualElementStore.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){visualElementStore.delete(this.current),this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const s=transformProps.has(t),r=n.on("change",c=>{this.latestValues[t]=c,this.props.onUpdate&&frame.preRender(this.notifyUpdate),s&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{r(),o(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in featureDefinitions){const n=featureDefinitions[t];if(!n)continue;const{isEnabled:s,Feature:r}=n;if(!this.features[t]&&r&&s(this.props)&&(this.features[t]=new r(this)),this.features[t]){const o=this.features[t];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<propEventHandlers.length;s++){const r=propEventHandlers[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,i=t[o];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const s=this.values.get(t);n!==s&&(s&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let s=this.values.get(t);return s===void 0&&n!==void 0&&(s=motionValue(n===null?void 0:n,{owner:this}),this.addValue(t,s)),s}readValue(t,n){var s;let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:(s=this.getBaseTargetFromProps(this.props,t))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(isNumericalString(r)||isZeroValueString(r))?r=parseFloat(r):!findValueType(r)&&complex.test(n)&&(r=getAnimatableNone(t,n)),this.setBaseTarget(t,isMotionValue(r)?r.get():r)),isMotionValue(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var n;const{initial:s}=this.props;let r;if(typeof s=="string"||typeof s=="object"){const i=resolveVariantFromProps(this.props,s,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);i&&(r=i[t])}if(s&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!isMotionValue(o)?o:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new SubscriptionManager),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:s}){delete n[t],delete s[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;isMotionValue(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function getComputedStyle(e){return window.getComputedStyle(e)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(t,n){if(transformProps.has(n)){const s=getDefaultValueType(n);return s&&s.default||0}else{const s=getComputedStyle(t),r=(isCSSVariableName(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(t,{transformPagePoint:n}){return measureViewportBox(t,n)}build(t,n,s){buildHTMLStyles(t,n,s.transformTemplate)}scrapeMotionValuesFromProps(t,n,s){return scrapeMotionValuesFromProps$1(t,n,s)}}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(transformProps.has(n)){const s=getDefaultValueType(n);return s&&s.default||0}return n=camelCaseAttributes.has(n)?n:camelToDash(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,s){return scrapeMotionValuesFromProps(t,n,s)}build(t,n,s){buildSVGAttrs(t,n,this.isSVGTag,s.transformTemplate)}renderInstance(t,n,s,r){renderSVG(t,n,s,r)}mount(t){this.isSVGTag=isSVGTag(t.tagName),super.mount(t)}}const createDomVisualElement=(e,t)=>isSVGComponent(e)?new SVGVisualElement(t):new HTMLVisualElement(t,{allowProjection:e!==reactExports.Fragment}),createMotionComponent=createMotionComponentFactory({...animations,...gestureAnimations,...drag,...layout},createDomVisualElement),motion=createDOMMotionComponentProxy(createMotionComponent),LoadingSpinner=({size:e=40,color:t="#4CAF50"})=>jsxRuntimeExports.jsx(Box,{sx:{display:"flex",justifyContent:"center",alignItems:"center",padding:2},children:jsxRuntimeExports.jsx(motion.div,{style:{width:e,height:e,border:`4px solid ${t}`,borderTop:"4px solid transparent",borderRadius:"50%"},animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}),CelebrationEffect=({show:e,message:t,points:n,onComplete:s})=>jsxRuntimeExports.jsx(AnimatePresence,{onExitComplete:s,children:e&&jsxRuntimeExports.jsx(Box,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:1e3},children:jsxRuntimeExports.jsxs(motion.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{duration:.5},children:[jsxRuntimeExports.jsx(Typography,{variant:"h2",sx:{color:"#FFD700",textShadow:"2px 2px 4px rgba(0,0,0,0.5)",marginBottom:2,textAlign:"center"},children:t}),jsxRuntimeExports.jsx(motion.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},children:jsxRuntimeExports.jsxs(Typography,{variant:"h4",sx:{color:"#4CAF50",textAlign:"center"},children:["+",n," Points!"]})})]})})}),DamageEffect=({show:e,damage:t,position:n,onComplete:s})=>jsxRuntimeExports.jsx(AnimatePresence,{onExitComplete:s,children:e&&jsxRuntimeExports.jsx(Box,{sx:{position:"absolute",left:n.x,top:n.y,pointerEvents:"none"},children:jsxRuntimeExports.jsx(motion.div,{initial:{y:0,opacity:1,scale:1},animate:{y:-50,opacity:0,scale:1.5},exit:{opacity:0},transition:{duration:.8},children:jsxRuntimeExports.jsxs(Typography,{variant:"h4",sx:{color:"#FF4444",fontWeight:"bold",textShadow:"2px 2px 4px rgba(0,0,0,0.5)"},children:["-",t]})})})}),LevelUpEffect=({show:e,level:t,onComplete:n})=>jsxRuntimeExports.jsx(AnimatePresence,{onExitComplete:n,children:e&&jsxRuntimeExports.jsxs(Box,{component:motion.div,initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.5},sx:{position:"fixed",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:9999},children:[jsxRuntimeExports.jsx(Typography,{component:motion.h1,initial:{y:-50},animate:{y:0},exit:{y:50},sx:{color:"#FFD700",fontSize:"4rem",fontWeight:"bold",textShadow:"0 0 10px rgba(255, 215, 0, 0.5)",marginBottom:2},children:"LEVEL UP!"}),jsxRuntimeExports.jsxs(Typography,{component:motion.h2,initial:{scale:0},animate:{scale:1},exit:{scale:0},sx:{color:"#FFF",fontSize:"3rem",fontWeight:"bold"},children:["Level ",t]})]})});function _defineProperty$1(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ownKeys$1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function _objectSpread2$1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys$1(Object(n),!0).forEach(function(s){_defineProperty$1(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys$1(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function _objectWithoutPropertiesLoose(e,t){if(e==null)return{};var n={},s=Object.keys(e),r,o;for(o=0;o<s.length;o++)r=s[o],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}function _objectWithoutProperties(e,t){if(e==null)return{};var n=_objectWithoutPropertiesLoose(e,t),s,r;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)s=o[r],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArrayLimit(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,r=!1,o=void 0;try{for(var i=e[Symbol.iterator](),c;!(s=(c=i.next()).done)&&(n.push(c.value),!(t&&n.length===t));s=!0);}catch(a){r=!0,o=a}finally{try{!s&&i.return!=null&&i.return()}finally{if(r)throw o}}return n}}function _unsupportedIterableToArray(e,t){if(e){if(typeof e=="string")return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(e,t)}}function _arrayLikeToArray(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,s)}return n}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(s){_defineProperty(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function compose$1(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(s){return t.reduceRight(function(r,o){return o(r)},s)}}function curry$1(e){return function t(){for(var n=this,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return r.length>=e.length?e.apply(this,r):function(){for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return t.apply(n,[].concat(r,c))}}}function isObject$1(e){return{}.toString.call(e).includes("Object")}function isEmpty(e){return!Object.keys(e).length}function isFunction(e){return typeof e=="function"}function hasOwnProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function validateChanges(e,t){return isObject$1(t)||errorHandler$1("changeType"),Object.keys(t).some(function(n){return!hasOwnProperty(e,n)})&&errorHandler$1("changeField"),t}function validateSelector(e){isFunction(e)||errorHandler$1("selectorType")}function validateHandler(e){isFunction(e)||isObject$1(e)||errorHandler$1("handlerType"),isObject$1(e)&&Object.values(e).some(function(t){return!isFunction(t)})&&errorHandler$1("handlersType")}function validateInitial(e){e||errorHandler$1("initialIsRequired"),isObject$1(e)||errorHandler$1("initialType"),isEmpty(e)&&errorHandler$1("initialContent")}function throwError$1(e,t){throw new Error(e[t]||e.default)}var errorMessages$1={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},errorHandler$1=curry$1(throwError$1)(errorMessages$1),validators$1={changes:validateChanges,selector:validateSelector,handler:validateHandler,initial:validateInitial};function create(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};validators$1.initial(e),validators$1.handler(t);var n={current:e},s=curry$1(didStateUpdate)(n,t),r=curry$1(updateState)(n),o=curry$1(validators$1.changes)(e),i=curry$1(extractChanges)(n);function c(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return validators$1.selector(u),u(n.current)}function a(u){compose$1(s,r,o,i)(u)}return[c,a]}function extractChanges(e,t){return isFunction(t)?t(e.current):t}function updateState(e,t){return e.current=_objectSpread2(_objectSpread2({},e.current),t),t}function didStateUpdate(e,t,n){return isFunction(t)?t(e.current):Object.keys(n).forEach(function(s){var r;return(r=t[s])===null||r===void 0?void 0:r.call(t,e.current[s])}),n}var index={create},config$1={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};function curry(e){return function t(){for(var n=this,s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return r.length>=e.length?e.apply(this,r):function(){for(var i=arguments.length,c=new Array(i),a=0;a<i;a++)c[a]=arguments[a];return t.apply(n,[].concat(r,c))}}}function isObject(e){return{}.toString.call(e).includes("Object")}function validateConfig(e){return e||errorHandler("configIsRequired"),isObject(e)||errorHandler("configType"),e.urls?(informAboutDeprecation(),{paths:{vs:e.urls.monacoBase}}):e}function informAboutDeprecation(){console.warn(errorMessages.deprecation)}function throwError(e,t){throw new Error(e[t]||e.default)}var errorMessages={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},errorHandler=curry(throwError)(errorMessages),validators={config:validateConfig},compose=function e(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return function(r){return n.reduceRight(function(o,i){return i(o)},r)}};function merge(e,t){return Object.keys(t).forEach(function(n){t[n]instanceof Object&&e[n]&&Object.assign(t[n],merge(e[n],t[n]))}),_objectSpread2$1(_objectSpread2$1({},e),t)}var CANCELATION_MESSAGE={type:"cancelation",msg:"operation is manually canceled"};function makeCancelable(e){var t=!1,n=new Promise(function(s,r){e.then(function(o){return t?r(CANCELATION_MESSAGE):s(o)}),e.catch(r)});return n.cancel=function(){return t=!0},n}var _state$create=index.create({config:config$1,isInitialized:!1,resolve:null,reject:null,monaco:null}),_state$create2=_slicedToArray(_state$create,2),getState=_state$create2[0],setState=_state$create2[1];function config(e){var t=validators.config(e),n=t.monaco,s=_objectWithoutProperties(t,["monaco"]);setState(function(r){return{config:merge(r.config,s),monaco:n}})}function init(){var e=getState(function(t){var n=t.monaco,s=t.isInitialized,r=t.resolve;return{monaco:n,isInitialized:s,resolve:r}});if(!e.isInitialized){if(setState({isInitialized:!0}),e.monaco)return e.resolve(e.monaco),makeCancelable(wrapperPromise);if(window.monaco&&window.monaco.editor)return storeMonacoInstance(window.monaco),e.resolve(window.monaco),makeCancelable(wrapperPromise);compose(injectScripts,getMonacoLoaderScript)(configureLoader)}return makeCancelable(wrapperPromise)}function injectScripts(e){return document.body.appendChild(e)}function createScript(e){var t=document.createElement("script");return e&&(t.src=e),t}function getMonacoLoaderScript(e){var t=getState(function(s){var r=s.config,o=s.reject;return{config:r,reject:o}}),n=createScript("".concat(t.config.paths.vs,"/loader.js"));return n.onload=function(){return e()},n.onerror=t.reject,n}function configureLoader(){var e=getState(function(n){var s=n.config,r=n.resolve,o=n.reject;return{config:s,resolve:r,reject:o}}),t=window.require;t.config(e.config),t(["vs/editor/editor.main"],function(n){storeMonacoInstance(n),e.resolve(n)},function(n){e.reject(n)})}function storeMonacoInstance(e){getState().monaco||setState({monaco:e})}function __getMonacoInstance(){return getState(function(e){var t=e.monaco;return t})}var wrapperPromise=new Promise(function(e,t){return setState({resolve:e,reject:t})}),loader={config,init,__getMonacoInstance},le={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},v=le,ae={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Y=ae;function Me({children:e}){return React.createElement("div",{style:Y.container},e)}var Z=Me,$=Z;function Ee({width:e,height:t,isEditorReady:n,loading:s,_ref:r,className:o,wrapperProps:i}){return React.createElement("section",{style:{...v.wrapper,width:e,height:t},...i},!n&&React.createElement($,null,s),React.createElement("div",{ref:r,style:{...v.fullWidth,...!n&&v.hide},className:o}))}var ee=Ee,H=reactExports.memo(ee);function Ce(e){reactExports.useEffect(e,[])}var k=Ce;function he(e,t,n=!0){let s=reactExports.useRef(!0);reactExports.useEffect(s.current||!n?()=>{s.current=!1}:e,t)}var l=he;function D(){}function h(e,t,n,s){return De(e,s)||be(e,t,n,s)}function De(e,t){return e.editor.getModel(te(e,t))}function be(e,t,n,s){return e.editor.createModel(t,n,s?te(e,s):void 0)}function te(e,t){return e.Uri.parse(t)}function Oe({original:e,modified:t,language:n,originalLanguage:s,modifiedLanguage:r,originalModelPath:o,modifiedModelPath:i,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:a=!1,theme:u="light",loading:d="Loading...",options:f={},height:p="100%",width:g="100%",className:x,wrapperProps:y={},beforeMount:P=D,onMount:b=D}){let[T,S]=reactExports.useState(!1),[R,E]=reactExports.useState(!0),C=reactExports.useRef(null),w=reactExports.useRef(null),A=reactExports.useRef(null),M=reactExports.useRef(b),V=reactExports.useRef(P),G=reactExports.useRef(!1);k(()=>{let j=loader.init();return j.then(N=>(w.current=N)&&E(!1)).catch(N=>(N==null?void 0:N.type)!=="cancelation"&&console.error("Monaco initialization: error:",N)),()=>C.current?J():j.cancel()}),l(()=>{if(C.current&&w.current){let j=C.current.getOriginalEditor(),N=h(w.current,e||"",s||n||"text",o||"");N!==j.getModel()&&j.setModel(N)}},[o],T),l(()=>{if(C.current&&w.current){let j=C.current.getModifiedEditor(),N=h(w.current,t||"",r||n||"text",i||"");N!==j.getModel()&&j.setModel(N)}},[i],T),l(()=>{let j=C.current.getModifiedEditor();j.getOption(w.current.editor.EditorOption.readOnly)?j.setValue(t||""):t!==j.getValue()&&(j.executeEdits("",[{range:j.getModel().getFullModelRange(),text:t||"",forceMoveMarkers:!0}]),j.pushUndoStop())},[t],T),l(()=>{var j,N;(N=(j=C.current)==null?void 0:j.getModel())==null||N.original.setValue(e||"")},[e],T),l(()=>{let{original:j,modified:N}=C.current.getModel();w.current.editor.setModelLanguage(j,s||n||"text"),w.current.editor.setModelLanguage(N,r||n||"text")},[n,s,r],T),l(()=>{var j;(j=w.current)==null||j.editor.setTheme(u)},[u],T),l(()=>{var j;(j=C.current)==null||j.updateOptions(f)},[f],T);let Q=reactExports.useCallback(()=>{var F;if(!w.current)return;V.current(w.current);let j=h(w.current,e||"",s||n||"text",o||""),N=h(w.current,t||"",r||n||"text",i||"");(F=C.current)==null||F.setModel({original:j,modified:N})},[n,t,r,e,s,o,i]),ne=reactExports.useCallback(()=>{var j;!G.current&&A.current&&(C.current=w.current.editor.createDiffEditor(A.current,{automaticLayout:!0,...f}),Q(),(j=w.current)==null||j.editor.setTheme(u),S(!0),G.current=!0)},[f,u,Q]);reactExports.useEffect(()=>{T&&M.current(C.current,w.current)},[T]),reactExports.useEffect(()=>{!R&&!T&&ne()},[R,T,ne]);function J(){var N,F,K,X;let j=(N=C.current)==null?void 0:N.getModel();c||((F=j==null?void 0:j.original)==null||F.dispose()),a||((K=j==null?void 0:j.modified)==null||K.dispose()),(X=C.current)==null||X.dispose()}return React.createElement(H,{width:g,height:p,isEditorReady:T,loading:d,_ref:A,className:x,wrapperProps:y})}var ie=Oe;reactExports.memo(ie);function He(e){let t=reactExports.useRef();return reactExports.useEffect(()=>{t.current=e},[e]),t.current}var se=He,_=new Map;function Ve({defaultValue:e,defaultLanguage:t,defaultPath:n,value:s,language:r,path:o,theme:i="light",line:c,loading:a="Loading...",options:u={},overrideServices:d={},saveViewState:f=!0,keepCurrentModel:p=!1,width:g="100%",height:x="100%",className:y,wrapperProps:P={},beforeMount:b=D,onMount:T=D,onChange:S,onValidate:R=D}){let[E,C]=reactExports.useState(!1),[w,A]=reactExports.useState(!0),M=reactExports.useRef(null),V=reactExports.useRef(null),G=reactExports.useRef(null),Q=reactExports.useRef(T),ne=reactExports.useRef(b),J=reactExports.useRef(),j=reactExports.useRef(s),N=se(o),F=reactExports.useRef(!1),K=reactExports.useRef(!1);k(()=>{let O=loader.init();return O.then(U=>(M.current=U)&&A(!1)).catch(U=>(U==null?void 0:U.type)!=="cancelation"&&console.error("Monaco initialization: error:",U)),()=>V.current?oe():O.cancel()}),l(()=>{var U,q,ce,re;let O=h(M.current,e||s||"",t||r||"",o||n||"");O!==((U=V.current)==null?void 0:U.getModel())&&(f&&_.set(N,(q=V.current)==null?void 0:q.saveViewState()),(ce=V.current)==null||ce.setModel(O),f&&((re=V.current)==null||re.restoreViewState(_.get(o))))},[o],E),l(()=>{var O;(O=V.current)==null||O.updateOptions(u)},[u],E),l(()=>{!V.current||s===void 0||(V.current.getOption(M.current.editor.EditorOption.readOnly)?V.current.setValue(s):s!==V.current.getValue()&&(K.current=!0,V.current.executeEdits("",[{range:V.current.getModel().getFullModelRange(),text:s,forceMoveMarkers:!0}]),V.current.pushUndoStop(),K.current=!1))},[s],E),l(()=>{var U,q;let O=(U=V.current)==null?void 0:U.getModel();O&&r&&((q=M.current)==null||q.editor.setModelLanguage(O,r))},[r],E),l(()=>{var O;c!==void 0&&((O=V.current)==null||O.revealLine(c))},[c],E),l(()=>{var O;(O=M.current)==null||O.editor.setTheme(i)},[i],E);let X=reactExports.useCallback(()=>{var O;if(!(!G.current||!M.current)&&!F.current){ne.current(M.current);let U=o||n,q=h(M.current,s||e||"",t||r||"",U||"");V.current=(O=M.current)==null?void 0:O.editor.create(G.current,{model:q,automaticLayout:!0,...u},d),f&&V.current.restoreViewState(_.get(U)),M.current.editor.setTheme(i),c!==void 0&&V.current.revealLine(c),C(!0),F.current=!0}},[e,t,n,s,r,o,u,d,f,i,c]);reactExports.useEffect(()=>{E&&Q.current(V.current,M.current)},[E]),reactExports.useEffect(()=>{!w&&!E&&X()},[w,E,X]),j.current=s,reactExports.useEffect(()=>{var O,U;E&&S&&((O=J.current)==null||O.dispose(),J.current=(U=V.current)==null?void 0:U.onDidChangeModelContent(q=>{K.current||S(V.current.getValue(),q)}))},[E,S]),reactExports.useEffect(()=>{if(E){let O=M.current.editor.onDidChangeMarkers(U=>{var ce;let q=(ce=V.current.getModel())==null?void 0:ce.uri;if(q&&U.find(re=>re.path===q.path)){let re=M.current.editor.getModelMarkers({resource:q});R==null||R(re)}});return()=>{O==null||O.dispose()}}return()=>{}},[E,R]);function oe(){var O,U;(O=J.current)==null||O.dispose(),p?f&&_.set(o,V.current.saveViewState()):(U=V.current.getModel())==null||U.dispose(),V.current.dispose()}return React.createElement(H,{width:g,height:x,isEditorReady:E,loading:a,_ref:G,className:y,wrapperProps:P})}var fe=Ve,de=reactExports.memo(fe),Ft=de;const CodeEditor=({code:e,onChange:t})=>jsxRuntimeExports.jsx(Box,{sx:{height:"400px",width:"100%"},children:jsxRuntimeExports.jsx(Ft,{height:"100%",defaultLanguage:"javascript",value:e,onChange:n=>t(n||""),theme:"vs-dark",options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",scrollBeyondLastLine:!1,automaticLayout:!0,tabSize:2}})}),GamePage=()=>{const{level:e}=useLevel(),{progress:t,updateProgress:n}=useProgress(),[s,r]=reactExports.useState(e),o=reactExports.useMemo(()=>({easy:[{id:"1",title:"魔法の数字（足し算）",description:"与えられた2つの数字を足し算する魔法の関数を完成させましょう！",difficulty:"easy",points:100,hint:"+ 演算子を使って2つの数を足し合わせましょう",initialCode:`function magicAdd(a, b) {
  // ここにコードを書いてください
  
}`,testCases:[{input:[1,2],expected:3},{input:[5,3],expected:8},{input:[10,-5],expected:5}]},{id:"2",title:"魔法の数字（掛け算）",description:"2つの数字を掛け合わせる魔法の関数を作りましょう！",difficulty:"easy",points:150,hint:"* 演算子を使って2つの数を掛け合わせましょう",initialCode:`function magicMultiply(a, b) {
  // ここにコードを書いてください
  
}`,testCases:[{input:[2,3],expected:6},{input:[4,5],expected:20},{input:[-2,3],expected:-6}]},{id:"3",title:"魔法の文字列",description:"2つの文字列を結合する魔法の関数を作りましょう！",difficulty:"easy",points:120,hint:"+ 演算子または concat() メソッドを使って文字列を結合できます",initialCode:`function magicConcat(str1, str2) {
  // ここにコードを書いてください
  
}`,testCases:[{input:["Hello","World"],expected:"HelloWorld"},{input:["Magic","Spell"],expected:"MagicSpell"},{input:["","Test"],expected:"Test"}]},{id:"10",title:"魔法の文字変換",description:"文字列を大文字に変換する魔法の関数を作りましょう！",difficulty:"easy",points:130,hint:"toUpperCase() メソッドを使うと文字列を大文字に変換できます",initialCode:`function magicUpperCase(text) {
  // ここにコードを書いてください
  
}`,testCases:[{input:["hello"],expected:"HELLO"},{input:["Magic"],expected:"MAGIC"},{input:["JavaScript"],expected:"JAVASCRIPT"}]},{id:"11",title:"魔法の長さ測定",description:"文字列の長さを計測する魔法の関数を作りましょう！",difficulty:"easy",points:110,hint:"length プロパティを使うと文字列の長さを取得できます",initialCode:`function magicLength(text) {
  // ここにコードを書いてください
  
}`,testCases:[{input:["hello"],expected:5},{input:[""],expected:0},{input:["魔法"],expected:2}]}],medium:[{id:"4",title:"魔法の配列（合計）",description:"配列の中の数字を全て足し合わせる魔法の関数を作りましょう！",difficulty:"medium",points:200,hint:"reduce メソッドを使うと配列の要素を集約できます",initialCode:`function magicSum(numbers) {
  // ここにコードを書いてください
  
}`,testCases:[{input:[[1,2,3]],expected:6},{input:[[5,-2,7,0]],expected:10},{input:[[]],expected:0}]},{id:"5",title:"魔法の配列（最大値）",description:"配列の中から最大の数を見つける魔法の関数を作りましょう！",difficulty:"medium",points:250,hint:"Math.max() と spread 演算子を組み合わせると便利です",initialCode:`function magicMax(numbers) {
  // ここにコードを書いてください
  
}`,testCases:[{input:[[1,5,3]],expected:5},{input:[[-1,-5,-3]],expected:-1},{input:[[0]],expected:0}]},{id:"6",title:"魔法のフィルター",description:"配列から偶数のみを抽出する魔法の関数を作りましょう！",difficulty:"medium",points:230,hint:"filter メソッドと剰余演算子(%)を使うとよいでしょう",initialCode:`function magicFilter(numbers) {
  // ここにコードを書いてください
  
}`,testCases:[{input:[[1,2,3,4]],expected:[2,4]},{input:[[5,7,9]],expected:[]},{input:[[2,4,6]],expected:[2,4,6]}]},{id:"12",title:"魔法の配列（重複除去）",description:"配列から重複する要素を取り除く魔法の関数を作りましょう！",difficulty:"medium",points:220,hint:"Set オブジェクトを使うと重複を簡単に除去できます",initialCode:`function magicUnique(numbers) {
  // ここにコードを書いてください
  
}`,testCases:[{input:[[1,2,2,3,3,4]],expected:[1,2,3,4]},{input:[[5,5,5]],expected:[5]},{input:[[1,2,3]],expected:[1,2,3]}]},{id:"13",title:"魔法の平均値",description:"配列の平均値を計算する魔法の関数を作りましょう！",difficulty:"medium",points:240,hint:"合計を要素数で割ると平均値が求められます",initialCode:`function magicAverage(numbers) {
  // ここにコードを書いてください
  
}`,testCases:[{input:[[1,2,3]],expected:2},{input:[[10,20,30,40]],expected:25},{input:[[0,0,0]],expected:0}]}],hard:[{id:"7",title:"魔法の回文",description:"与えられた文字列が回文かどうかを判定する魔法の関数を作りましょう！",difficulty:"hard",points:300,hint:"文字列を反転させて比較すると判定できます",initialCode:`function magicPalindrome(text) {
  // ここにコードを書いてください
  
}`,testCases:[{input:["level"],expected:!0},{input:["hello"],expected:!1},{input:[""],expected:!0}]},{id:"8",title:"魔法のソート",description:"数字の配列を小さい順に並び替える魔法の関数を作りましょう！",difficulty:"hard",points:350,hint:"バブルソートやクイックソートなどのアルゴリズムを実装してみましょう",initialCode:`function magicSort(numbers) {
  // ここにコードを書いてください
  
}`,testCases:[{input:[[3,1,4]],expected:[1,3,4]},{input:[[5,2,8,1]],expected:[1,2,5,8]},{input:[[]],expected:[]}]},{id:"9",title:"魔法のアナグラム",description:"2つの文字列がアナグラムかどうかを判定する魔法の関数を作りましょう！",difficulty:"hard",points:400,hint:"文字列をソートして比較すると判定できます",initialCode:`function magicAnagram(str1, str2) {
  // ここにコードを書いてください
  
}`,testCases:[{input:["listen","silent"],expected:!0},{input:["hello","world"],expected:!1},{input:["",""],expected:!0}]},{id:"14",title:"魔法の文字列圧縮",description:"連続する文字を圧縮する魔法の関数を作りましょう！例：aabbbcccc → a2b3c4",difficulty:"hard",points:380,hint:"文字の出現回数をカウントして、文字と数字を組み合わせましょう",initialCode:`function magicCompress(text) {
  // ここにコードを書いてください
  
}`,testCases:[{input:["aabbbcccc"],expected:"a2b3c4"},{input:["aaa"],expected:"a3"},{input:["abcd"],expected:"a1b1c1d1"}]},{id:"15",title:"魔法の階段",description:"数値nを受け取り、n段の階段パターンを作る魔法の関数を作りましょう！",difficulty:"hard",points:420,hint:"文字列の繰り返しとループを組み合わせて階段を作りましょう",initialCode:`function magicStairs(n) {
  // ここにコードを書いてください
  
}`,testCases:[{input:[3],expected:["  *"," **","***"]},{input:[1],expected:["*"]},{input:[2],expected:[" *","**"]}]}]}),[]),[i,c]=reactExports.useState((t==null?void 0:t.bossesState)||{easy:{name:"見習い魔法使いのボス",maxHp:1e3,currentHp:1e3,image:"🧙‍♂️"},medium:{name:"上級魔法使いのボス",maxHp:2e3,currentHp:2e3,image:"🧙‍♀️"},hard:{name:"大魔法使いのボス",maxHp:3e3,currentHp:3e3,image:"🧙‍♂️✨"}}),[a,u]=reactExports.useState("easy"),[d,f]=reactExports.useState(null),[p,g]=reactExports.useState(""),[x,y]=reactExports.useState([]),[P,b]=reactExports.useState(!1),[T,S]=reactExports.useState(!1),[R,E]=reactExports.useState(0),[C,w]=reactExports.useState([]),[A,M]=reactExports.useState(!1),[V,G]=reactExports.useState(!1),[Q,ne]=reactExports.useState({x:0,y:0}),[J,j]=reactExports.useState(!1),[N,F]=reactExports.useState(!1),[K,X]=reactExports.useState("all"),[oe,O]=reactExports.useState(!0);reactExports.useEffect(()=>{(async()=>{try{if(O(!0),t&&t.completedChallenges&&t.totalPoints&&t.bossesState&&(E(t.totalPoints),w(t.completedChallenges),c(t.bossesState)),!o||!o[a]||!Array.isArray(o[a])){console.error("Challenges not properly initialized");return}const B=o[a];if(B&&B.length>0){const I=B[0];f(I),g(I.initialCode||"")}}catch(B){console.error("Failed to initialize game data:",B instanceof Error?B.message:"Unknown error")}finally{O(!1)}})()},[t,o,a]);const U=L=>Math.floor(L*1.5),q=(L,B)=>{u(B);const I=o[B];if(I&&I.length>0){const W=I[0];f(W),g(W.initialCode||""),y([])}},ce=L=>{const B=L.target.value,I=o[a];if(I){const W=I.find(z=>z.id===B);W&&(f(W),g(W.initialCode||""),y([]))}};reactExports.useEffect(()=>{if(A){const L=setTimeout(()=>{M(!1)},3e3);return()=>{clearTimeout(L),M(!1)}}},[A]);const re=L=>({input:[],expected:null,actual:L instanceof Error?L.message:"Unknown error",passed:!1,success:!1,message:L instanceof Error?L.message:"An unknown error occurred"}),ue=async()=>{b(!0),y([]);let L=!0;const B=[];try{for(const I of d.testCases){const W=await executeCode(p,I.input,I.expected),z={input:I.input,expected:I.expected,actual:W.success?W.actual:W.message,passed:W.success,success:W.success,message:W.message};B.push(z),W.success||(L=!1)}if(y(B),L){const I=U(d.points),W=document.querySelector(".boss-image");if(W){const z=W.getBoundingClientRect();ne({x:z.left+z.width/2,y:z.top+z.height/2})}G(!0),await n(I),c(z=>({...z,[a]:{...z[a],currentHp:Math.max(0,z[a].currentHp-I)}})),w(z=>[...z,d.id]),E(z=>z+d.points),me(),M(!0)}}catch(I){y([re(I)])}finally{b(!1)}},pe=L=>{const B=L.currentHp/L.maxHp*100;let I="";return L.currentHp===0?I="倒れた！":B<=25?I="瀕死":B<=50?I="苦戦中":B<=75?I="余裕がある":I="健在",I},me=()=>{d&&n(d.points)},ge=()=>{K==="all"?(n(0),E(0),w([]),c({easy:{name:"見習い魔法使いのボス",maxHp:1e3,currentHp:1e3,image:"🧙‍♂️"},medium:{name:"上級魔法使いのボス",maxHp:2e3,currentHp:2e3,image:"🧙‍♀️"},hard:{name:"大魔法使いのボス",maxHp:3e3,currentHp:3e3,image:"🧙‍♂️✨"}})):(n(0),c(L=>({...L,[a]:{...L[a],currentHp:1e3}})),w(L=>L.filter(B=>{const I=a==="easy"?"1":a==="medium"?"4":"7";return!(B.startsWith(I)||a==="easy"&&(B==="2"||B==="3"||B==="10"||B==="11")||a==="medium"&&(B==="5"||B==="6"||B==="12"||B==="13")||a==="hard"&&(B==="8"||B==="9"||B==="14"||B==="15"))}))),f(o[a][0]),g(o[a][0].initialCode),y([]),S(!1),F(!1)};return reactExports.useEffect(()=>{if(s>e){r(e),j(!0);const L=setTimeout(()=>{j(!1)},3e3);return()=>{clearTimeout(L),j(!1)}}},[s,e]),oe?jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",minHeight:"100vh"},children:[jsxRuntimeExports.jsx(MagicBackground,{}),jsxRuntimeExports.jsx(MagicParticles,{}),jsxRuntimeExports.jsxs(Box,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",textAlign:"center"},children:[jsxRuntimeExports.jsx(LoadingSpinner,{}),jsxRuntimeExports.jsx(Typography,{variant:"h6",sx:{mt:2},children:"魔法の世界を準備中..."})]})]}):jsxRuntimeExports.jsxs(Box,{sx:{position:"relative",minHeight:"100vh"},children:[jsxRuntimeExports.jsx(MagicBackground,{}),jsxRuntimeExports.jsx(MagicParticles,{}),jsxRuntimeExports.jsx(LevelDisplay,{}),P&&jsxRuntimeExports.jsx(LoadingSpinner,{}),jsxRuntimeExports.jsx(CelebrationEffect,{show:A,message:"クエスト完了！",points:(d==null?void 0:d.points)||0,onComplete:()=>M(!1)}),jsxRuntimeExports.jsx(DamageEffect,{show:V,damage:U((d==null?void 0:d.points)||0),position:Q,onComplete:()=>G(!1)}),jsxRuntimeExports.jsx(LevelUpEffect,{show:J,level:s,onComplete:()=>j(!1)}),jsxRuntimeExports.jsxs(Container,{maxWidth:"lg",sx:{pt:4,pb:4},children:[jsxRuntimeExports.jsxs(Box,{sx:{textAlign:"center",mb:4},children:[jsxRuntimeExports.jsx(Typography,{variant:"h2",component:"h1",sx:{fontWeight:"bold",background:"linear-gradient(45deg, #FF6B6B, #4ECDC4)",backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent",textShadow:"2px 2px 4px rgba(0,0,0,0.1)",mb:1},children:"魔法使いの修行場"}),jsxRuntimeExports.jsx(Typography,{variant:"h5",color:"textSecondary",sx:{fontStyle:"italic",mb:3},children:"〜 Magic Code Learning 〜"})]}),jsxRuntimeExports.jsx(Box,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:jsxRuntimeExports.jsxs(Tabs,{value:a,onChange:q,centered:!0,children:[jsxRuntimeExports.jsx(Tab,{label:"初級",value:"easy"}),jsxRuntimeExports.jsx(Tab,{label:"中級",value:"medium"}),jsxRuntimeExports.jsx(Tab,{label:"上級",value:"hard"})]})}),jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:3,mb:3,backgroundColor:"rgba(255, 255, 255, 0.9)"},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"h5",component:"span",children:i[a].image}),jsxRuntimeExports.jsx(Typography,{variant:"h5",component:"span",sx:{fontWeight:"bold"},children:i[a].name}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",color:"textSecondary",children:["状態: ",pe(i[a])]})]}),jsxRuntimeExports.jsxs(Box,{sx:{width:"100%",bgcolor:"grey.300",borderRadius:1,height:20,position:"relative"},children:[jsxRuntimeExports.jsx(Box,{sx:{width:`${i[a].currentHp/i[a].maxHp*100}%`,bgcolor:"error.main",height:"100%",borderRadius:1,transition:"width 0.5s ease-in-out"}}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"white",textShadow:"1px 1px 2px black"},children:["HP: ",i[a].currentHp," / ",i[a].maxHp]})]})]}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[jsxRuntimeExports.jsxs(FormControl,{fullWidth:!0,sx:{mb:2},children:[jsxRuntimeExports.jsx(InputLabel,{children:"Challenge"}),o&&o[a]&&Array.isArray(o[a])&&o[a].length>0?jsxRuntimeExports.jsx(Select,{value:(d==null?void 0:d.id)||"",onChange:ce,label:"Challenge",children:o[a].map(L=>jsxRuntimeExports.jsxs(MenuItem,{value:L.id,disabled:C.includes(L.id),children:[L.title," ",C.includes(L.id)?"(Completed)":""]},L.id))}):jsxRuntimeExports.jsx(Typography,{children:"チャレンジを読み込み中..."})]}),jsxRuntimeExports.jsxs(Typography,{variant:"h6",color:"primary",children:["総ポイント: ",R]})]}),jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:3,mb:3,backgroundColor:"rgba(255, 255, 255, 0.9)"},children:[jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"h4",component:"h1",children:d==null?void 0:d.title}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",alignItems:"center",gap:2},children:[jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"textSecondary",children:["難易度: ",d==null?void 0:d.difficulty]}),jsxRuntimeExports.jsxs(Typography,{variant:"body2",color:"textSecondary",children:["ポイント: ",d==null?void 0:d.points]})]})]}),jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,children:d==null?void 0:d.description}),(d==null?void 0:d.hint)&&jsxRuntimeExports.jsxs(Box,{sx:{mt:2},children:[jsxRuntimeExports.jsx(Button,{variant:"outlined",size:"small",onClick:()=>S(!T),children:T?"ヒントを隠す":"ヒントを表示"}),T&&jsxRuntimeExports.jsxs(Typography,{variant:"body2",sx:{mt:1,color:"info.main"},children:["💡 ",d.hint]})]})]}),jsxRuntimeExports.jsx(Paper,{elevation:3,sx:{mb:3,backgroundColor:"rgba(255, 255, 255, 0.9)"},children:jsxRuntimeExports.jsx(CodeEditor,{code:p,onChange:g})}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[jsxRuntimeExports.jsx(Button,{variant:"contained",color:"primary",onClick:ue,disabled:P,sx:{minWidth:120},children:P?"実行中...":"実行"}),jsxRuntimeExports.jsx(Button,{variant:"outlined",color:"error",onClick:()=>F(!0),sx:{minWidth:120},children:"リセット"})]}),Array.isArray(x)&&x.length>0&&jsxRuntimeExports.jsxs(Paper,{elevation:3,sx:{p:3,backgroundColor:"rgba(255, 255, 255, 0.9)"},children:[jsxRuntimeExports.jsx(Typography,{variant:"h6",gutterBottom:!0,children:"テスト結果"}),x.map((L,B)=>jsxRuntimeExports.jsx(Typography,{variant:"body1",paragraph:!0,color:L.success?"success.main":"error.main",children:L.message},B)),x.every(L=>L.success)&&!C.includes((d==null?void 0:d.id)||"")&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(Typography,{variant:"h6",color:"success.main",children:["🎉 おめでとうございます！",d==null?void 0:d.points,"ポイント獲得しました！"]}),jsxRuntimeExports.jsxs(Typography,{variant:"body1",color:"success.main",children:["ボスに",U((d==null?void 0:d.points)||0),"ダメージを与えました！"]}),i[a].currentHp===0&&jsxRuntimeExports.jsxs(Typography,{variant:"h5",color:"success.main",sx:{mt:2},children:["🎊 ",i[a].name,"を倒しました！次の難易度に挑戦しましょう！"]})]})]}),jsxRuntimeExports.jsxs(Dialog,{open:N,onClose:()=>F(!1),"aria-labelledby":"reset-dialog-title",children:[jsxRuntimeExports.jsx(DialogTitle,{id:"reset-dialog-title",children:"ゲームをリセットしますか？"}),jsxRuntimeExports.jsxs(DialogContent,{children:[jsxRuntimeExports.jsxs(Box,{sx:{mb:2},children:[jsxRuntimeExports.jsx(Typography,{variant:"body1",gutterBottom:!0,children:"リセットする範囲を選択してください："}),jsxRuntimeExports.jsxs(Box,{sx:{display:"flex",gap:2,mt:1},children:[jsxRuntimeExports.jsx(Button,{variant:K==="all"?"contained":"outlined",onClick:()=>X("all"),color:"primary",children:"全体リセット"}),jsxRuntimeExports.jsx(Button,{variant:K==="difficulty"?"contained":"outlined",onClick:()=>X("difficulty"),color:"primary",children:"現在の難易度のみ"})]})]}),jsxRuntimeExports.jsxs(Typography,{color:"error",children:[K==="all"?"全ての進捗（レベル、経験値、全難易度のボスの状態など）が初期状態に戻ります。":`${a}難易度の進捗（チャレンジの完了状態、ボスの状態）のみが初期状態に戻ります。`,"この操作は取り消せません。"]})]}),jsxRuntimeExports.jsxs(DialogActions,{children:[jsxRuntimeExports.jsx(Button,{onClick:()=>F(!1),color:"primary",children:"キャンセル"}),jsxRuntimeExports.jsx(Button,{onClick:ge,color:"error",variant:"contained",startIcon:K==="all"?"🔄":"📊",children:K==="all"?"全体リセット":`${a}難易度をリセット`})]})]})]})]})},PrivateRoute=({children:e})=>{const{user:t}=useAuth();return t?jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:e}):jsxRuntimeExports.jsx(Navigate,{to:"/login",replace:!0})},App=()=>jsxRuntimeExports.jsx(ThemeProvider,{theme,children:jsxRuntimeExports.jsx(BrowserRouter,{children:jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/login",element:jsxRuntimeExports.jsx(LoginPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/register",element:jsxRuntimeExports.jsx(RegisterPage,{})}),jsxRuntimeExports.jsx(Route,{path:"/game",element:jsxRuntimeExports.jsx(PrivateRoute,{children:jsxRuntimeExports.jsx(ProgressProvider,{children:jsxRuntimeExports.jsx(LevelProvider,{children:jsxRuntimeExports.jsx(LearningProvider,{children:jsxRuntimeExports.jsx(GamePage,{})})})})})}),jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Navigate,{to:"/game",replace:!0})})]})})})});client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(App,{})}));
//# sourceMappingURL=index-BQlFsnpi.js.map
