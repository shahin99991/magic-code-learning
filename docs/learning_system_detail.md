# 学習システム詳細設計書

## Level 1: C言語の基本（変数、データ型）

### 1. ステージ構成

#### Stage 1-1: プログラミングの世界へようこそ
- **ゲーム設定**: 主人公が魔法学校に入学し、プログラミングの基礎を学び始める
- **学習目標**: 
  - プログラムの基本概念の理解
  - 最初のプログラム作成
  - 変数の概念理解

##### クエスト1: Hello, World!
- **ストーリー**: 魔法の第一歩、画面に文字を表示する呪文を学ぶ
- **課題**:
  ```c
  #include <stdio.h>
  int main() {
      // ここに魔法の言葉を書こう
      return 0;
  }
  ```
- **期待する出力**: "Hello, World!"
- **報酬**: 経験値100pt、基本魔法書の獲得

##### クエスト2: 魔法の変数
- **ストーリー**: 魔力を変数に込める練習
- **課題**: 数値を保存し、表示する
- **学習ポイント**: 
  - 変数の宣言
  - 変数への代入
  - 変数の使用

#### Stage 1-2: データ型の探究
- **ゲーム設定**: 様々な魔法の素材（データ型）を学ぶ
- **学習目標**:
  - 基本データ型の理解
  - 型変換の基礎
  - 演算子の使用

##### クエスト1: 魔法の素材を集めよう
- **課題内容**:
  - int型の理解と使用
  - float型の理解と使用
  - char型の理解と使用
- **実践課題**:
  ```c
  int magicPower;
  float potionStrength;
  char magicSymbol;
  ```

##### クエスト2: 魔法の計算
- **課題内容**: 基本的な演算子の使用
- **実践課題**: 
  - 足し算、引き算の魔法
  - 掛け算、割り算の魔法
  - 余りを求める魔法

### 2. 評価システム

#### 2.1 採点基準
- **コード動作**: 40%
- **コードスタイル**: 30%
- **最適化**: 30%

#### 2.2 フィードバック方式
- リアルタイムのシンタックスチェック
- コンパイルエラーの親切な説明
- 実行結果の視覚的フィードバック

### 3. 報酬システム

#### 3.1 経験値付与
- クエスト完了: 100-300XP
- 最適解の発見: ボーナス50XP
- 連続成功ボーナス: 最大100XP

#### 3.2 アイテム報酬
- 魔法の書（リファレンスガイド）
- デバッグの眼鏡（エラー発見補助）
- コードの羽ペン（タイピング速度上昇）

### 4. ヘルプシステム

#### 4.1 ヒントシステム
- 段階的なヒント提供
- コードスニペットの例示
- 関連する魔法理論の解説

#### 4.2 デバッグ支援
- エラーメッセージの日本語解説
- よくある間違いの指摘
- 解決方法の提案

### 5. 進捗管理

#### 5.1 学習ログ
- クエスト完了状況
- 獲得経験値
- コーディング時間
- エラー発生回数

#### 5.2 実績システム
- はじめてのプログラム実行
- 完璧なコードの作成
- 連続クエスト達成

### 6. 次のレベルへの条件
- 全クエストの完了
- 総合評価70%以上
- 基本的な変数操作とデータ型の理解度確認テストの合格 

## Level 2: 制御構造（if文、ループ）

### 1. ステージ構成

#### Stage 2-1: 条件分岐の魔法
- **ゲーム設定**: 魔法の分岐点で正しい判断を下す訓練
- **学習目標**:
  - if文の基本構文理解
  - 条件式の作成
  - 複数条件の組み合わせ

##### クエスト1: 魔法の門番
- **ストーリー**: 魔力レベルに応じて門を開く魔法を習得
- **課題**:
  ```c
  int magicPower = /* 魔力値を入力 */;
  
  // 魔力が50以上なら門が開く魔法を書こう
  ```
- **学習ポイント**:
  - if文の基本構文
  - 比較演算子の使用
- **報酬**: 経験値150pt、分岐の魔法書

##### クエスト2: 魔法の試験
- **ストーリー**: 複数の条件をクリアして上級魔法使いになる試験
- **課題**:
  ```c
  int magicPower = /* 魔力値 */;
  int skillLevel = /* 技能レベル */;
  
  // 魔力が80以上かつ技能レベルが5以上で合格
  // 魔力が100以上なら無条件で合格
  // それ以外は不合格
  ```
- **学習ポイント**:
  - else if, elseの使用
  - 論理演算子（&&, ||）

#### Stage 2-2: 反復の魔法（ループ）
- **ゲーム設定**: 同じ魔法を効率的に繰り返す技を学ぶ
- **学習目標**:
  - forループの基本
  - whileループの使用
  - ループの制御

##### クエスト1: 魔法の連続詠唱
- **ストーリー**: 特定回数の魔法を連続で唱える修行
- **課題**:
  ```c
  // 魔法を10回連続で唱える
  // 各回の魔法の威力を計算して表示
  ```
- **学習ポイント**:
  - forループの構文
  - カウンタ変数の使用
  - ループ内の処理

##### クエスト2: 魔力が尽きるまで
- **ストーリー**: 魔力が続く限り魔法を維持する修行
- **課題**:
  ```c
  int magicPower = 100;
  
  // 魔力が10以上ある限り魔法を維持
  // 1回の維持に10の魔力を消費
  ```
- **学習ポイント**:
  - whileループの使用
  - 条件判定
  - 変数の更新

#### Stage 2-3: 上級魔法（ネストと制御）
- **ゲーム設定**: 複雑な魔法の制御を学ぶ
- **学習目標**:
  - ネストされた制御構造
  - break/continue
  - 複雑な条件分岐

##### クエスト1: 魔法陣の作成
- **ストーリー**: 入れ子構造の魔法陣を描く
- **課題**:
  ```c
  // 5x5の魔法陣を描く
  // 特定のパターンで魔力を配置
  ```
- **学習ポイント**:
  - ネストされたforループ
  - パターン生成
  - 2次元の制御

##### クエスト2: 魔法の中断と継続
- **ストーリー**: 魔法の詠唱を状況に応じて制御
- **課題**:
  ```c
  // 100回の魔法詠唱に挑戦
  // 魔力が尽きたら中断
  // 失敗したら次の詠唱へ
  ```
- **学習ポイント**:
  - breakの使用
  - continueの使用
  - 複合的な制御

### 2. 評価システム

#### 2.1 採点基準
- **コード動作**: 35%
- **コード効率**: 35%
- **エラー処理**: 30%

#### 2.2 フィードバック方式
- 制御フローの視覚化
- 実行ステップのアニメーション
- 条件分岐の結果表示

### 3. 報酬システム

#### 3.1 経験値付与
- 基本クエスト: 200XP
- 最適解の発見: ボーナス100XP
- 追加チャレンジ: 最大300XP

#### 3.2 アイテム報酬
- 分岐の魔法書（if文リファレンス）
- ループの指輪（繰り返し処理強化）
- 制御の杖（デバッグ補助）

### 4. ヘルプシステム

#### 4.1 ヒントシステム
- フローチャートによる説明
- 条件式の組み立てガイド
- ループカウンタの使用例

#### 4.2 デバッグ支援
- 無限ループの検出
- 条件式の論理エラー指摘
- ステップ実行機能

### 5. 進捗管理

#### 5.1 学習ログ
- 制御構造の使用回数
- 条件分岐の正確性
- ループの効率性
- デバッグ回数

#### 5.2 実績システム
- 完璧な条件分岐の作成
- 効率的なループの実装
- 複雑な制御構造の習得

### 6. 次のレベルへの条件
- 全クエストの完了
- 総合評価75%以上
- 制御構造の理解度確認テストの合格
- 実践的な問題解決能力の証明 

## Level 3: 関数（魔法の呪文作成）

### 1. ステージ構成

#### Stage 3-1: 基本的な呪文の作成
- **ゲーム設定**: オリジナルの魔法呪文（関数）を作成する修行
- **学習目標**:
  - 関数の基本概念理解
  - 関数の定義と呼び出し
  - 戻り値の理解

##### クエスト1: 最初の呪文作成
- **ストーリー**: 基本的な魔法効果を関数化する
- **課題**:
  ```c
  // 魔力値を2倍にして返す呪文を作ろう
  // 関数名: doubleMagicPower
  // 引数: int power
  // 戻り値: 2倍された魔力値
  ```
- **学習ポイント**:
  - 関数の基本構文
  - 引数の使用
  - return文の使用
- **報酬**: 経験値200pt、呪文の巻物

##### クエスト2: 呪文の組み合わせ
- **ストーリー**: 複数の魔法効果を組み合わせる
- **課題**:
  ```c
  // 攻撃力と防御力から総合的な魔力を計算する呪文
  // 関数名: calculateTotalPower
  // 引数: int attack, int defense
  // 戻り値: 総合魔力値
  ```
- **学習ポイント**:
  - 複数の引数の扱い
  - 関数内での計算処理
  - 適切な戻り値の設定

#### Stage 3-2: 呪文のライブラリ化
- **ゲーム設定**: 汎用的な魔法呪文を作成し、再利用可能にする
- **学習目標**:
  - 関数の再利用性
  - スコープの理解
  - プロトタイプ宣言

##### クエスト1: 汎用呪文の作成
- **ストーリー**: 様々な場面で使える汎用的な魔法を作成
- **課題**:
  ```c
  // 以下の汎用呪文を作成しよう
  // 1. 最大値を求める呪文
  // 2. 最小値を求める呪文
  // 3. 平均値を求める呪文
  ```
- **学習ポイント**:
  - 関数の再利用
  - 引数の型設計
  - 関数の命名規則

##### クエスト2: 呪文の事前宣言
- **ストーリー**: 大規模な魔法書の作成方法を学ぶ
- **課題**:
  ```c
  // 魔法ライブラリを作成
  // ヘッダーファイルとソースファイルの分離
  // プロトタイプ宣言の活用
  ```
- **学習ポイント**:
  - プロトタイプ宣言
  - ヘッダーファイル
  - ファイル分割

#### Stage 3-3: 高度な呪文技術
- **ゲーム設定**: 複雑な魔法効果を実現する高度な呪文を習得
- **学習目標**:
  - 再帰関数
  - ポインタと関数
  - コールバック関数の基礎

##### クエスト1: 再帰的な魔法
- **ストーリー**: 自己増幅する魔法の作成
- **課題**:
  ```c
  // 階乗を計算する再帰呪文
  // フィボナッチ数を求める再帰呪文
  ```
- **学習ポイント**:
  - 再帰の概念
  - 終了条件の設定
  - スタックの理解

##### クエスト2: 魔法の受け渡し
- **ストーリー**: 魔法効果を別の魔法に受け渡す
- **課題**:
  ```c
  // 関数ポインタを使用した
  // 魔法効果の動的な切り替え
  ```
- **学習ポイント**:
  - 関数ポインタ
  - コールバック関数
  - 高度な関数設計

### 2. 評価システム

#### 2.1 採点基準
- **関数設計**: 40%
- **コード品質**: 30%
- **再利用性**: 30%

#### 2.2 フィードバック方式
- 関数の入出力テスト
- コードの整理度チェック
- 再利用性の評価

### 3. 報酬システム

#### 3.1 経験値付与
- 基本関数作成: 200XP
- 最適設計ボーナス: 100XP
- ライブラリ化達成: 300XP

#### 3.2 アイテム報酬
- 呪文の巻物（関数リファレンス）
- 再帰の指輪（再帰関数強化）
- ライブラリの杖（関数管理補助）

### 4. ヘルプシステム

#### 4.1 ヒントシステム
- 関数設計のガイドライン
- 再帰のビジュアル説明
- コード例のライブラリ

#### 4.2 デバッグ支援
- 関数の実行トレース
- スタックフレームの可視化
- 引数と戻り値の検証

### 5. 進捗管理

#### 5.1 学習ログ
- 作成した関数の数
- 関数の再利用回数
- デバッグ成功率
- コード品質スコア

#### 5.2 実績システム
- 完璧な関数設計
- 再帰マスター
- ライブラリ構築者

### 6. 次のレベルへの条件
- 全クエストの完了
- 総合評価80%以上
- 関数設計の理解度テスト合格
- オリジナル魔法ライブラリの作成 