# 学習システム詳細設計書

## Level 1: C言語の基本（変数、データ型）

### 1. ステージ構成

#### Stage 1-1: プログラミングの世界へようこそ
- **ゲーム設定**: 主人公が魔法学校に入学し、プログラミングの基礎を学び始める
- **学習目標**: 
  - プログラムの基本概念の理解
  - 最初のプログラム作成
  - 変数の概念理解

##### クエスト1: Hello, World!
- **ストーリー**: 魔法の第一歩、画面に文字を表示する呪文を学ぶ
- **課題**:
  ```c
  #include <stdio.h>
  int main() {
      // ここに魔法の言葉を書こう
      return 0;
  }
  ```
- **期待する出力**: "Hello, World!"
- **報酬**: 経験値100pt、基本魔法書の獲得

##### クエスト2: 魔法の変数
- **ストーリー**: 魔力を変数に込める練習
- **課題**: 数値を保存し、表示する
- **学習ポイント**: 
  - 変数の宣言
  - 変数への代入
  - 変数の使用

#### Stage 1-2: データ型の探究
- **ゲーム設定**: 様々な魔法の素材（データ型）を学ぶ
- **学習目標**:
  - 基本データ型の理解
  - 型変換の基礎
  - 演算子の使用

##### クエスト1: 魔法の素材を集めよう
- **課題内容**:
  - int型の理解と使用
  - float型の理解と使用
  - char型の理解と使用
- **実践課題**:
  ```c
  int magicPower;
  float potionStrength;
  char magicSymbol;
  ```

##### クエスト2: 魔法の計算
- **課題内容**: 基本的な演算子の使用
- **実践課題**: 
  - 足し算、引き算の魔法
  - 掛け算、割り算の魔法
  - 余りを求める魔法

### 2. 評価システム

#### 2.1 採点基準
- **コード動作**: 40%
- **コードスタイル**: 30%
- **最適化**: 30%

#### 2.2 フィードバック方式
- リアルタイムのシンタックスチェック
- コンパイルエラーの親切な説明
- 実行結果の視覚的フィードバック

### 3. 報酬システム

#### 3.1 経験値付与
- クエスト完了: 100-300XP
- 最適解の発見: ボーナス50XP
- 連続成功ボーナス: 最大100XP

#### 3.2 アイテム報酬
- 魔法の書（リファレンスガイド）
- デバッグの眼鏡（エラー発見補助）
- コードの羽ペン（タイピング速度上昇）

### 4. ヘルプシステム

#### 4.1 ヒントシステム
- 段階的なヒント提供
- コードスニペットの例示
- 関連する魔法理論の解説

#### 4.2 デバッグ支援
- エラーメッセージの日本語解説
- よくある間違いの指摘
- 解決方法の提案

### 5. 進捗管理

#### 5.1 学習ログ
- クエスト完了状況
- 獲得経験値
- コーディング時間
- エラー発生回数

#### 5.2 実績システム
- はじめてのプログラム実行
- 完璧なコードの作成
- 連続クエスト達成

### 6. 次のレベルへの条件
- 全クエストの完了
- 総合評価70%以上
- 基本的な変数操作とデータ型の理解度確認テストの合格 

## Level 2: 制御構造（if文、ループ）

### 1. ステージ構成

#### Stage 2-1: 条件分岐の魔法
- **ゲーム設定**: 魔法の分岐点で正しい判断を下す訓練
- **学習目標**:
  - if文の基本構文理解
  - 条件式の作成
  - 複数条件の組み合わせ

##### クエスト1: 魔法の門番
- **ストーリー**: 魔力レベルに応じて門を開く魔法を習得
- **課題**:
  ```c
  int magicPower = /* 魔力値を入力 */;
  
  // 魔力が50以上なら門が開く魔法を書こう
  ```
- **学習ポイント**:
  - if文の基本構文
  - 比較演算子の使用
- **報酬**: 経験値150pt、分岐の魔法書

##### クエスト2: 魔法の試験
- **ストーリー**: 複数の条件をクリアして上級魔法使いになる試験
- **課題**:
  ```c
  int magicPower = /* 魔力値 */;
  int skillLevel = /* 技能レベル */;
  
  // 魔力が80以上かつ技能レベルが5以上で合格
  // 魔力が100以上なら無条件で合格
  // それ以外は不合格
  ```
- **学習ポイント**:
  - else if, elseの使用
  - 論理演算子（&&, ||）

#### Stage 2-2: 反復の魔法（ループ）
- **ゲーム設定**: 同じ魔法を効率的に繰り返す技を学ぶ
- **学習目標**:
  - forループの基本
  - whileループの使用
  - ループの制御

##### クエスト1: 魔法の連続詠唱
- **ストーリー**: 特定回数の魔法を連続で唱える修行
- **課題**:
  ```c
  // 魔法を10回連続で唱える
  // 各回の魔法の威力を計算して表示
  ```
- **学習ポイント**:
  - forループの構文
  - カウンタ変数の使用
  - ループ内の処理

##### クエスト2: 魔力が尽きるまで
- **ストーリー**: 魔力が続く限り魔法を維持する修行
- **課題**:
  ```c
  int magicPower = 100;
  
  // 魔力が10以上ある限り魔法を維持
  // 1回の維持に10の魔力を消費
  ```
- **学習ポイント**:
  - whileループの使用
  - 条件判定
  - 変数の更新

#### Stage 2-3: 上級魔法（ネストと制御）
- **ゲーム設定**: 複雑な魔法の制御を学ぶ
- **学習目標**:
  - ネストされた制御構造
  - break/continue
  - 複雑な条件分岐

##### クエスト1: 魔法陣の作成
- **ストーリー**: 入れ子構造の魔法陣を描く
- **課題**:
  ```c
  // 5x5の魔法陣を描く
  // 特定のパターンで魔力を配置
  ```
- **学習ポイント**:
  - ネストされたforループ
  - パターン生成
  - 2次元の制御

##### クエスト2: 魔法の中断と継続
- **ストーリー**: 魔法の詠唱を状況に応じて制御
- **課題**:
  ```c
  // 100回の魔法詠唱に挑戦
  // 魔力が尽きたら中断
  // 失敗したら次の詠唱へ
  ```
- **学習ポイント**:
  - breakの使用
  - continueの使用
  - 複合的な制御

### 2. 評価システム

#### 2.1 採点基準
- **コード動作**: 35%
- **コード効率**: 35%
- **エラー処理**: 30%

#### 2.2 フィードバック方式
- 制御フローの視覚化
- 実行ステップのアニメーション
- 条件分岐の結果表示

### 3. 報酬システム

#### 3.1 経験値付与
- 基本クエスト: 200XP
- 最適解の発見: ボーナス100XP
- 追加チャレンジ: 最大300XP

#### 3.2 アイテム報酬
- 分岐の魔法書（if文リファレンス）
- ループの指輪（繰り返し処理強化）
- 制御の杖（デバッグ補助）

### 4. ヘルプシステム

#### 4.1 ヒントシステム
- フローチャートによる説明
- 条件式の組み立てガイド
- ループカウンタの使用例

#### 4.2 デバッグ支援
- 無限ループの検出
- 条件式の論理エラー指摘
- ステップ実行機能

### 5. 進捗管理

#### 5.1 学習ログ
- 制御構造の使用回数
- 条件分岐の正確性
- ループの効率性
- デバッグ回数

#### 5.2 実績システム
- 完璧な条件分岐の作成
- 効率的なループの実装
- 複雑な制御構造の習得

### 6. 次のレベルへの条件
- 全クエストの完了
- 総合評価75%以上
- 制御構造の理解度確認テストの合格
- 実践的な問題解決能力の証明 

## Level 3: 関数（魔法の呪文作成）

### 1. ステージ構成

#### Stage 3-1: 基本的な呪文の作成
- **ゲーム設定**: オリジナルの魔法呪文（関数）を作成する修行
- **学習目標**:
  - 関数の基本概念理解
  - 関数の定義と呼び出し
  - 戻り値の理解

##### クエスト1: 最初の呪文作成
- **ストーリー**: 基本的な魔法効果を関数化する
- **課題**:
  ```c
  // 魔力値を2倍にして返す呪文を作ろう
  // 関数名: doubleMagicPower
  // 引数: int power
  // 戻り値: 2倍された魔力値
  ```
- **学習ポイント**:
  - 関数の基本構文
  - 引数の使用
  - return文の使用
- **報酬**: 経験値200pt、呪文の巻物

##### クエスト2: 呪文の組み合わせ
- **ストーリー**: 複数の魔法効果を組み合わせる
- **課題**:
  ```c
  // 攻撃力と防御力から総合的な魔力を計算する呪文
  // 関数名: calculateTotalPower
  // 引数: int attack, int defense
  // 戻り値: 総合魔力値
  ```
- **学習ポイント**:
  - 複数の引数の扱い
  - 関数内での計算処理
  - 適切な戻り値の設定

#### Stage 3-2: 呪文のライブラリ化
- **ゲーム設定**: 汎用的な魔法呪文を作成し、再利用可能にする
- **学習目標**:
  - 関数の再利用性
  - スコープの理解
  - プロトタイプ宣言

##### クエスト1: 汎用呪文の作成
- **ストーリー**: 様々な場面で使える汎用的な魔法を作成
- **課題**:
  ```c
  // 以下の汎用呪文を作成しよう
  // 1. 最大値を求める呪文
  // 2. 最小値を求める呪文
  // 3. 平均値を求める呪文
  ```
- **学習ポイント**:
  - 関数の再利用
  - 引数の型設計
  - 関数の命名規則

##### クエスト2: 呪文の事前宣言
- **ストーリー**: 大規模な魔法書の作成方法を学ぶ
- **課題**:
  ```c
  // 魔法ライブラリを作成
  // ヘッダーファイルとソースファイルの分離
  // プロトタイプ宣言の活用
  ```
- **学習ポイント**:
  - プロトタイプ宣言
  - ヘッダーファイル
  - ファイル分割

#### Stage 3-3: 高度な呪文技術
- **ゲーム設定**: 複雑な魔法効果を実現する高度な呪文を習得
- **学習目標**:
  - 再帰関数
  - ポインタと関数
  - コールバック関数の基礎

##### クエスト1: 再帰的な魔法
- **ストーリー**: 自己増幅する魔法の作成
- **課題**:
  ```c
  // 階乗を計算する再帰呪文
  // フィボナッチ数を求める再帰呪文
  ```
- **学習ポイント**:
  - 再帰の概念
  - 終了条件の設定
  - スタックの理解

##### クエスト2: 魔法の受け渡し
- **ストーリー**: 魔法効果を別の魔法に受け渡す
- **課題**:
  ```c
  // 関数ポインタを使用した
  // 魔法効果の動的な切り替え
  ```
- **学習ポイント**:
  - 関数ポインタ
  - コールバック関数
  - 高度な関数設計

### 2. 評価システム

#### 2.1 採点基準
- **関数設計**: 40%
- **コード品質**: 30%
- **再利用性**: 30%

#### 2.2 フィードバック方式
- 関数の入出力テスト
- コードの整理度チェック
- 再利用性の評価

### 3. 報酬システム

#### 3.1 経験値付与
- 基本関数作成: 200XP
- 最適設計ボーナス: 100XP
- ライブラリ化達成: 300XP

#### 3.2 アイテム報酬
- 呪文の巻物（関数リファレンス）
- 再帰の指輪（再帰関数強化）
- ライブラリの杖（関数管理補助）

### 4. ヘルプシステム

#### 4.1 ヒントシステム
- 関数設計のガイドライン
- 再帰のビジュアル説明
- コード例のライブラリ

#### 4.2 デバッグ支援
- 関数の実行トレース
- スタックフレームの可視化
- 引数と戻り値の検証

### 5. 進捗管理

#### 5.1 学習ログ
- 作成した関数の数
- 関数の再利用回数
- デバッグ成功率
- コード品質スコア

#### 5.2 実績システム
- 完璧な関数設計
- 再帰マスター
- ライブラリ構築者

### 6. 次のレベルへの条件
- 全クエストの完了
- 総合評価80%以上
- 関数設計の理解度テスト合格
- オリジナル魔法ライブラリの作成 

## Level 4: 配列とポインタ（魔法の器と指針）

### 1. ステージ構成

#### Stage 4-1: 魔法の器（配列）の基礎
- **ゲーム設定**: 複数の魔力を一つの器に格納する技術を学ぶ
- **学習目標**:
  - 配列の基本概念理解
  - 配列の宣言と初期化
  - 配列要素へのアクセス

##### クエスト1: 最初の魔法の器
- **ストーリー**: 複数の魔力値を保存できる器を作成
- **課題**:
  ```c
  // 5つの魔力値を格納する配列を作成
  // 各要素に魔力値を設定
  // 全ての魔力値を表示
  ```
- **学習ポイント**:
  - 配列の宣言
  - インデックスの使用
  - 要素の代入と参照
- **報酬**: 経験値250pt、魔法の器の設計図

##### クエスト2: 魔力の集計
- **ストーリー**: 保存した魔力値の分析
- **課題**:
  ```c
  // 10個の魔力値から以下を計算
  // - 合計魔力
  // - 平均魔力
  // - 最大魔力と最小魔力
  ```
- **学習ポイント**:
  - 配列の走査
  - 累積計算
  - 条件分岐との組み合わせ

#### Stage 4-2: 魔法の指針（ポインタ）入門
- **ゲーム設定**: 魔力の位置を直接指し示す技術を習得
- **学習目標**:
  - ポインタの基本概念
  - アドレスとデリファレンス
  - ポインタの演算

##### クエスト1: 魔力の位置を示す
- **ストーリー**: 魔力が格納された場所を特定する技術
- **課題**:
  ```c
  int magicPower = 100;
  // magicPowerのアドレスを取得
  // ポインタを使って値を変更
  // 変更前と変更後の値を表示
  ```
- **学習ポイント**:
  - アドレス演算子(&)
  - ポインタの宣言
  - デリファレンス演算子(*)

##### クエスト2: 指針の操作
- **ストーリー**: 複数の魔力間を移動する技術
- **課題**:
  ```c
  // 配列の要素をポインタで操作
  // ポインタの加算と減算
  // ポインタを使った値の交換
  ```
- **学習ポイント**:
  - ポインタ演算
  - 配列とポインタの関係
  - 値の交換テクニック

#### Stage 4-3: 高度な器と指針の技
- **ゲーム設定**: 複雑な魔法構造の操作を習得
- **学習目標**:
  - 多次元配列
  - ポインタ配列
  - 動的メモリ管理

##### クエスト1: 魔法陣の操作
- **ストーリー**: 二次元の魔法陣を操作する技術
- **課題**:
  ```c
  // 3x3の魔法陣を作成
  // 行と列の操作
  // 対角線上の要素の処理
  ```
- **学習ポイント**:
  - 二次元配列の宣言
  - 多次元配列の走査
  - 行列の概念

##### クエスト2: 動的な魔法の器
- **ストーリー**: 必要に応じて大きさを変える魔法の器
- **課題**:
  ```c
  // 動的なメモリ確保
  // 可変長配列の作成
  // メモリの解放
  ```
- **学習ポイント**:
  - malloc/free
  - メモリリーク防止
  - 動的配列の操作

### 2. 評価システム

#### 2.1 採点基準
- **メモリ管理**: 40%
- **コード効率**: 30%
- **エラー処理**: 30%

#### 2.2 フィードバック方式
- メモリ使用状況の可視化
- ポインタの移動アニメーション
- 配列操作の視覚的表示

### 3. 報酬システム

#### 3.1 経験値付与
- 基本課題: 250XP
- メモリ最適化: 100XP
- エラー回避: 150XP

#### 3.2 アイテム報酬
- 配列の書（配列操作ガイド）
- 指針の眼鏡（ポインタ可視化）
- メモリの杖（動的メモリ管理）

### 4. ヘルプシステム

#### 4.1 ヒントシステム
- メモリマップの表示
- ポインタの追跡機能
- 一般的なエラーパターン

#### 4.2 デバッグ支援
- メモリリーク検出
- 無効なポインタ検出
- 配列境界チェック

### 5. 進捗管理

#### 5.1 学習ログ
- メモリ管理スコア
- エラー発生率
- 最適化達成度
- デバッグ成功率

#### 5.2 実績システム
- メモリマスター
- ポインタの達人
- 配列操作の魔術師

### 6. 次のレベルへの条件
- 全クエストの完了
- 総合評価85%以上
- メモリ管理テストの合格
- 実践的なデータ構造の実装 

## Level 5: 構造体とファイル操作（魔法の書物と記録術）

### 1. ステージ構成

#### Stage 5-1: 魔法の書物（構造体）
- **ゲーム設定**: 複数の魔法属性を一つの書物にまとめる技術を学ぶ
- **学習目標**:
  - 構造体の基本概念理解
  - 構造体の定義と初期化
  - メンバへのアクセス

##### クエスト1: 魔法使いの特性
- **ストーリー**: 魔法使いの情報を一つの構造体にまとめる
- **課題**:
  ```c
  // 魔法使いの情報を格納する構造体を作成
  struct Wizard {
      char name[50];
      int level;
      float magicPower;
      char speciality[30];
  };
  // 構造体の初期化と使用
  ```
- **学習ポイント**:
  - 構造体の定義
  - メンバ変数の設定
  - ドット演算子の使用
- **報酬**: 経験値300pt、構造体の設計図

##### クエスト2: 魔法アイテムの管理
- **ストーリー**: 様々な魔法アイテムの情報を構造化
- **課題**:
  ```c
  // 魔法アイテムの構造体を作成
  // 配列と組み合わせてアイテム管理
  // アイテムの検索と表示
  ```
- **学習ポイント**:
  - 構造体配列
  - 構造体のポインタ
  - 複合データ型の操作

#### Stage 5-2: 高度な書物技術
- **ゲーム設定**: より複雑な魔法情報の構造化
- **学習目標**:
  - ネストされた構造体
  - 共用体の使用
  - 列挙型の活用

##### クエスト1: 魔法図鑑の作成
- **ストーリー**: 様々な魔法の詳細情報を体系化
- **課題**:
  ```c
  // 魔法のカテゴリ（列挙型）
  // 魔法効果の詳細（構造体）
  // 魔法図鑑の作成（ネスト構造体）
  ```
- **学習ポイント**:
  - 列挙型の定義
  - 構造体のネスト
  - 複雑なデータ構造

##### クエスト2: 魔法の変換術
- **ストーリー**: 異なる形態の魔法を統一的に管理
- **課題**:
  ```c
  // 共用体を使用した
  // 異なる魔法効果の統一管理
  ```
- **学習ポイント**:
  - 共用体の使用
  - メモリ効率
  - 型変換の管理

#### Stage 5-3: 魔法の記録術（ファイル操作）
- **ゲーム設定**: 魔法の情報を永続的に保存・読み出す技術
- **学習目標**:
  - ファイルの基本操作
  - テキストファイル処理
  - バイナリファイル処理

##### クエスト1: 魔法の記録
- **ストーリー**: 魔法の情報をファイルに記録
- **課題**:
  ```c
  // テキストファイルへの書き込み
  // 魔法使いの情報を保存
  // 保存データの読み出し
  ```
- **学習ポイント**:
  - ファイルオープン/クローズ
  - fprintf/fscanf
  - エラー処理

##### クエスト2: 魔法図鑑の保管
- **ストーリー**: 複雑な魔法情報のバイナリ保存
- **課題**:
  ```c
  // 構造体のバイナリ保存
  // ランダムアクセス
  // データの更新と検索
  ```
- **学習ポイント**:
  - fread/fwrite
  - fseek
  - バイナリデータ処理

### 2. 評価システム

#### 2.1 採点基準
- **データ設計**: 40%
- **ファイル処理**: 30%
- **エラー処理**: 30%

#### 2.2 フィードバック方式
- 構造体の視覚化
- ファイル操作の追跡
- データ整合性チェック

### 3. 報酬システム

#### 3.1 経験値付与
- 基本課題: 300XP
- 最適設計: 150XP
- エラー対策: 150XP

#### 3.2 アイテム報酬
- 構造体の書（データ設計ガイド）
- 記録の羽ペン（ファイル操作補助）
- 永続の指輪（データ保存強化）

### 4. ヘルプシステム

#### 4.1 ヒントシステム
- データ構造の設計例
- ファイル操作のパターン
- エラー処理のガイド

#### 4.2 デバッグ支援
- 構造体のメモリレイアウト表示
- ファイル操作のトレース
- データ整合性チェック

### 5. 進捗管理

#### 5.1 学習ログ
- データ設計スコア
- ファイル操作成功率
- エラー処理カバレッジ
- 最適化達成度

#### 5.2 実績システム
- 構造体マスター
- ファイル操作の達人
- データ管理の魔術師

### 6. コース修了要件
- 全クエストの完了
- 総合評価90%以上
- 実践的なデータ管理システムの実装
- 最終プロジェクトの完成 